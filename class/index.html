<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>thelo | Courses</title>
    <link rel="icon" href="https://thelo.space/img/thelofavicon.png" type="image/png" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

    <style>
        /* ============================================
           SHARED STYLES (From Landing Page)
           ============================================
        */
        :root {
            --thelo-blue: #2563EB;
            --thelo-bg: #F8F9FA;
            --thelo-text: #111827;
            --grid-color: #E5E7EB;
            --slate-100: #f1f5f9;
            --slate-200: #e2e8f0;
            --slate-300: #cbd5e1;
            --slate-500: #64748b;
            --slate-600: #475569;
            --slate-800: #1e293b;
            --white: #ffffff;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; border-width: 0; border-style: solid; border-color: var(--slate-200); }
        
        body {
            font-family: 'Manrope', system-ui, sans-serif;
            background-color: var(--thelo-bg);
            color: var(--thelo-text);
            line-height: 1.5;
            background-image: linear-gradient(to right, var(--grid-color) 1px, transparent 1px), linear-gradient(to bottom, var(--grid-color) 1px, transparent 1px);
            background-size: 40px 40px;
            min-height: 100vh;
        }

        /* Armenian Fonts */
        @font-face { font-family: 'Montserrat Arm'; src: url('https://thelo.space/fonts/Montserratarm-Regular.otf'); font-weight: 400; }
        @font-face { font-family: 'Montserrat Arm'; src: url('https://thelo.space/fonts/Montserratarm-SemiBold.otf'); font-weight: 600; }
        @font-face { font-family: 'Montserrat Arm'; src: url('https://thelo.space/fonts/Montserratarm-ExtraBold.otf'); font-weight: 800; }

        html[lang="hy"] body { font-family: 'Montserrat Arm', sans-serif; }

        /* Utilities */
        .container-max { max-width: 80rem; margin: 0 auto; padding: 0 1.5rem; }
        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 600; }
        .text-blue { color: var(--thelo-blue); }
        .text-slate-500 { color: var(--slate-500); }
        .text-slate-600 { color: var(--slate-600); }
        
        /* Navigation (Simplified for Course Page) */
        nav { padding: 1.5rem 0; position: relative; z-index: 40; }
        .nav-inner { display: flex; align-items: center; justify-content: space-between; }
        .logo img { height: 2.5rem; width: auto; }
        .btn-outline {
            border: 1px solid var(--slate-200);
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.2s;
            background: rgba(255,255,255,0.8);
        }
        .btn-outline:hover { border-color: var(--thelo-blue); color: var(--thelo-blue); }

        /* ============================================
           COURSES SPECIFIC STYLES
           ============================================
        */

        /* Header Area */
        .course-header {
            padding: 4rem 0 2rem 0;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .course-title { font-size: 2.5rem; font-weight: 800; line-height: 1.1; }
        .filter-summary {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--white);
            border: 1px solid var(--slate-200);
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            width: fit-content;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: border-color 0.2s;
        }
        .filter-summary:hover { border-color: var(--thelo-blue); }

        /* Grid Layout */
        .lessons-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            padding-bottom: 4rem;
        }
        @media (min-width: 640px) { .lessons-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (min-width: 1024px) { .lessons-grid { grid-template-columns: repeat(3, 1fr); } }

        /* Card Design */
        .lesson-card {
            background: var(--white);
            border: 1px solid var(--slate-200);
            border-radius: 1rem;
            padding: 1.5rem;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            flex-direction: column;
            height: 100%;
            position: relative;
            overflow: hidden;
        }
        .lesson-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            border-color: var(--thelo-blue);
        }
        .lesson-tag {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--thelo-blue);
            margin-bottom: 0.5rem;
        }
        .lesson-title { font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem; line-height: 1.3; }
        .lesson-desc { font-size: 0.95rem; color: var(--slate-600); margin-bottom: 1.5rem; flex-grow: 1; }
        
        .card-footer {
            margin-top: auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-top: 1px solid var(--slate-100);
            padding-top: 1rem;
        }
        .lesson-meta { font-size: 0.875rem; color: var(--slate-500); display: flex; gap: 1rem; }
        .start-btn-icon {
            background: var(--thelo-bg);
            color: var(--thelo-text);
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s, color 0.2s;
        }
        .lesson-card:hover .start-btn-icon { background: var(--thelo-blue); color: var(--white); }

        /* ============================================
           MODAL (POPUP) STYLES
           ============================================
        */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        .modal-overlay.active { opacity: 1; pointer-events: auto; }

        .modal-window {
            background: var(--white);
            border: 1px solid var(--grid-color);
            border-radius: 0.75rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            width: 90%;
            max-width: 28rem;
            position: relative;
            transform: scale(0.95);
            transition: transform 0.3s ease;
            overflow: hidden;
        }
        .modal-overlay.active .modal-window { transform: scale(1); }

        /* Mac Window Header Styling */
        .window-bar {
            background: var(--slate-100);
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--slate-200);
            display: flex;
            gap: 0.5rem;
        }
        .dot { width: 0.75rem; height: 0.75rem; border-radius: 50%; }
        .dot-red { background: #FF5F56; }
        .dot-yellow { background: #FFBD2E; }
        .dot-green { background: #27C93F; }

        .modal-content { padding: 2rem; text-align: center; }
        .modal-title { font-size: 1.5rem; font-weight: 800; margin-bottom: 0.5rem; }
        .modal-subtitle { color: var(--slate-600); margin-bottom: 2rem; }

        /* Form Elements */
        .form-group { margin-bottom: 1.5rem; text-align: left; }
        .form-label { display: block; font-size: 0.875rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--slate-800); }
        .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--slate-200);
            border-radius: 0.5rem;
            font-family: inherit;
            font-size: 1rem;
            background-color: var(--white);
            cursor: pointer;
        }
        .form-select:focus { outline: 2px solid var(--thelo-blue); border-color: transparent; }

        .btn-primary {
            background-color: var(--thelo-blue);
            color: var(--white);
            width: 100%;
            padding: 0.875rem;
            border-radius: 0.5rem;
            font-weight: 700;
            font-size: 1rem;
            transition: opacity 0.2s;
            margin-top: 1rem;
        }
        .btn-primary:hover { opacity: 0.9; }

    </style>
</head>
<body>

    <nav>
        <div class="container-max nav-inner">
            <a href="/" class="logo">
                <img src="https://thelo.space/img/bluethelo.svg" alt="thelo logo" />
            </a>
            <div>
                <button onclick="openModal()" class="btn-outline">
                    <i class="fas fa-sliders-h"></i> <span id="navSettingsBtn">Settings</span>
                </button>
            </div>
        </div>
    </nav>

    <main class="container-max">
        <div class="course-header">
            <h1 class="course-title" id="pageTitle">Loading...</h1>
            <div class="filter-summary" onclick="openModal()">
                <span id="filterDisplay">...</span>
                <i class="fas fa-chevron-down text-slate-500" style="font-size: 0.75rem;"></i>
            </div>
        </div>

        <div id="lessonsGrid" class="lessons-grid">
            </div>
    </main>

    <div id="setupModal" class="modal-overlay active">
        <div class="modal-window">
            <div class="window-bar">
                <div class="dot dot-red"></div>
                <div class="dot dot-yellow"></div>
                <div class="dot dot-green"></div>
            </div>
            <div class="modal-content">
                <h2 class="modal-title" id="modalTitle">Welcome to thelo</h2>
                <p class="modal-subtitle" id="modalSub">Select your preferences to start.</p>
                
                <form id="setupForm" onsubmit="handleSetup(event)">
                    <div class="form-group">
                        <label class="form-label" for="langSelect" id="labelLang">Language</label>
                        <select id="langSelect" class="form-select" onchange="updateModalLabels()">
                            <option value="en">English</option>
                            <option value="hy">Հայերեն</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="gradeSelect" id="labelGrade">Grade</label>
                        <select id="gradeSelect" class="form-select">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                        </select>
                    </div>

                    <button type="submit" class="btn-primary" id="btnStart">Start Learning</button>
                </form>
            </div>
        </div>
    </div>

<script>
    // --- Configuration & UI Text ---
    const uiText = {
        en: {
            pageTitlePrefix: "Grade",
            pageTitleSuffix: "Math",
            navSettings: "Settings",
            modalTitle: "Welcome to thelo",
            modalSub: "Select your preferences to start.",
            labelLang: "Language",
            labelGrade: "Grade",
            btnStart: "Start Learning",
            lessonCount: "lessons available",
            startLesson: "Start"
        },
        hy: {
            pageTitlePrefix: "",
            pageTitleSuffix: "-րդ դասարան", // e.g. 5-րդ դասարան
            navSettings: "Կարգավորումներ",
            modalTitle: "Բարի գալուստ Թելո",
            modalSub: "Ընտրեք նախընտրելի տարբերակները։",
            labelLang: "Լեզու",
            labelGrade: "Դասարան",
            btnStart: "Սկսել",
            lessonCount: "դաս",
            startLesson: "Սկսել"
        }
    };

    // --- Mock Data Generator (Simulating Database) ---
    // Creates generic lessons for demonstration
    const generateLessons = (lang, grade) => {
        const subjects = lang === 'en' 
            ? ['Algebra', 'Geometry', 'Arithmetic', 'Logic'] 
            : ['Հանրահաշիվ', 'Երկրաչափություն', 'Թվաբանություն', 'Տրամաբանություն'];
            
        const titlesEn = [
            "Introduction to Integers", "Linear Equations", "Area of Triangles", 
            "Fractions and Decimals", "Probability Basics", "Pythagorean Theorem"
        ];
        
        const titlesHy = [
            "Ամբողջ թվերի ներածություն", "Գծային հավասարումներ", "Եռանկյան մակերես", 
            "Կոտորակներ և տասնորդականներ", "Հավանականության հիմունքներ", "Պյութագորասի թեորեմ"
        ];

        const titles = lang === 'en' ? titlesEn : titlesHy;
        const count = 5 + Math.floor(Math.random() * 5); // 5 to 9 lessons per grade
        
        let lessons = [];
        for(let i=0; i<count; i++) {
            lessons.push({
                id: i,
                tag: subjects[i % subjects.length],
                title: `${titles[i % titles.length]} (${lang.toUpperCase()})`,
                desc: lang === 'en' 
                    ? "Master this concept with interactive step-by-step problems." 
                    : "Յուրացրեք այս թեման ինտերակտիվ խնդիրների միջոցով:",
                duration: (10 + Math.floor(Math.random() * 20)) + " min"
            });
        }
        return lessons;
    };

    // --- Application Logic ---
    let currentLang = 'en';
    let currentGrade = '5';

    function updateModalLabels() {
        const selectedLang = document.getElementById('langSelect').value;
        const T = uiText[selectedLang];
        
        document.getElementById('modalTitle').textContent = T.modalTitle;
        document.getElementById('modalSub').textContent = T.modalSub;
        document.getElementById('labelLang').textContent = T.labelLang;
        document.getElementById('labelGrade').textContent = T.labelGrade;
        document.getElementById('btnStart').textContent = T.btnStart;
        
        // Font switching
        if(selectedLang === 'hy') {
            document.documentElement.lang = 'hy';
        } else {
            document.documentElement.lang = 'en';
        }
    }

    function openModal() {
        document.getElementById('setupModal').classList.add('active');
        // Pre-select current values
        document.getElementById('langSelect').value = currentLang;
        document.getElementById('gradeSelect').value = currentGrade;
        updateModalLabels();
    }

    function closeModal() {
        document.getElementById('setupModal').classList.remove('active');
    }

    function handleSetup(e) {
        e.preventDefault();
        currentLang = document.getElementById('langSelect').value;
        currentGrade = document.getElementById('gradeSelect').value;
        
        renderPage();
        closeModal();
    }

    function renderPage() {
        const T = uiText[currentLang];
        
        // 1. Update Fonts & Lang Attribute
        document.documentElement.lang = currentLang;

        // 2. Update Header Text
        const titleEl = document.getElementById('pageTitle');
        if (currentLang === 'en') {
            titleEl.textContent = `${T.pageTitlePrefix} ${currentGrade} ${T.pageTitleSuffix}`;
            document.getElementById('filterDisplay').textContent = `${currentGrade}th Grade • English`;
        } else {
            titleEl.textContent = `${currentGrade}${T.pageTitleSuffix}`;
            document.getElementById('filterDisplay').textContent = `${currentGrade}-րդ դասարան • Հայերեն`;
        }

        document.getElementById('navSettingsBtn').textContent = T.navSettings;

        // 3. Generate and Render Grid
        const grid = document.getElementById('lessonsGrid');
        grid.innerHTML = ''; // Clear existing
        
        const lessons = generateLessons(currentLang, currentGrade);

        lessons.forEach(lesson => {
            const card = document.createElement('div');
            card.className = 'lesson-card';
            card.innerHTML = `
                <div class="lesson-tag">${lesson.tag}</div>
                <h3 class="lesson-title">${lesson.title}</h3>
                <p class="lesson-desc">${lesson.desc}</p>
                <div class="card-footer">
                    <div class="lesson-meta">
                        <span><i class="far fa-clock"></i> ${lesson.duration}</span>
                    </div>
                    <button class="start-btn-icon" aria-label="${T.startLesson}">
                        <i class="fas fa-play" style="font-size: 0.875rem; padding-left: 2px;"></i>
                    </button>
                </div>
                <a href="/class?id=${lesson.id}&lang=${currentLang}" style="position:absolute; inset:0; z-index:1;"></a>
            `;
            grid.appendChild(card);
        });
    }

    // Initialize logic on load
    document.addEventListener('DOMContentLoaded', () => {
        // We do not render content immediately. 
        // We wait for the modal to be submitted.
        updateModalLabels(); 
    });

</script>
</body>
</html>
