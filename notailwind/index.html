<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title data-i18n="title">thelo</title>
  <link rel="icon" href="https://thelo.space/img/thelofavicon.png" type="image/png" />
  <link rel="apple-touch-icon" href="https://thelo.space/img/yarnicon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;700;800&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

  <style>
    /* ========== Base / Theme ========== */
    :root{
      --thelo-blue:#2563EB;
      --thelo-bg:#F8F9FA;
      --thelo-text:#111827;
      --grid-color:#E5E7EB;
      --slate-600:#475569;
      --slate-500:#64748b;
      --slate-200:#e5e7eb;
    }
    html{scroll-behavior:smooth}
    *,*::before,*::after{box-sizing:border-box}
    body{
      margin:0;
      font-family:'Manrope',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Helvetica Neue',Arial,sans-serif;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      color:var(--thelo-text);
      background:var(--thelo-bg);
      background-image:
        linear-gradient(to right,var(--grid-color) 1px,transparent 1px),
        linear-gradient(to bottom,var(--grid-color) 1px,transparent 1px);
      background-size:40px 40px;
    }
    h1,h2,h3,h4,h5,h6{font-weight:800;margin:0}
    p{margin:0}

    /* ========== Simple animation helper ========== */
    .anim-target{
      opacity:0;transform:translateY(20px);
      transition:opacity .7s cubic-bezier(.215,.61,.355,1),transform .7s cubic-bezier(.215,.61,.355,1);
    }
    .anim-target.is-visible{opacity:1;transform:translateY(0)}

    /* ========== Minimal utility set (Tailwind-like) ========== */
    .hidden{display:none !important}
    .w-full{width:100%}.h-full{height:100%}
    .w-auto{width:auto}.h-9{height:2.25rem}
    .z-50{z-index:50}
    .relative{position:relative}.absolute{position:absolute}.sticky{position:sticky}
    .top-0{top:0}.top-0{top:0}.left-0{left:0}.right-6{right:1.5rem}
    .mx-auto{margin-left:auto;margin-right:auto}
    .text-center{text-align:center}
    .text-sm{font-size:.875rem;line-height:1.25rem}
    .text-lg{font-size:1.125rem;line-height:1.75rem}
    .font-semibold{font-weight:700}
    .font-extrabold{font-weight:800}
    .text-slate-600{color:var(--slate-600)}
    .text-slate-500{color:var(--slate-500)}
    .text-[var(--thelo-text)]{color:var(--thelo-text)}
    .bg-transparent{background:transparent}
    .bg-white{background:#fff}
    .bg-white\/70{background:rgba(255,255,255,.7)}
    .border{border:1px solid var(--slate-200)}
    .border-b{border-bottom:1px solid var(--slate-200)}
    .border-t{border-top:1px solid var(--slate-200)}
    .border-slate-200{border-color:var(--slate-200)}
    .rounded-md{border-radius:.375rem}
    .rounded-2xl{border-radius:1rem}
    .rounded-full{border-radius:9999px}
    .shadow-md{box-shadow:0 4px 6px rgba(0,0,0,.07)}
    .backdrop-blur-sm{backdrop-filter:blur(6px)}
    .object-contain{object-fit:contain}
    .w-fit{width:-moz-fit-content;width:fit-content}
    .pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}

    .flex{display:flex}.items-center{align-items:center}.justify-between{justify-content:space-between}
    .grid{display:grid}.grid-cols-1{grid-template-columns:1fr}
    .gap-4{gap:1rem}.gap-8{gap:2rem}.gap-12{gap:3rem}
    .gap-x-12{column-gap:3rem}.gap-y-16{row-gap:4rem}
    .px-4{padding-left:1rem;padding-right:1rem}
    .px-6{padding-left:1.5rem;padding-right:1.5rem}
    .py-3{padding-top:.75rem;padding-bottom:.75rem}
    .pt-2{padding-top:.5rem}.pb-4{padding-bottom:1rem}
    .pt-8{padding-top:2rem}
    .pt-16{padding-top:4rem}.pb-24{padding-bottom:6rem}
    .py-10{padding-top:2.5rem;padding-bottom:2.5rem}
    .py-24{padding-top:6rem;padding-bottom:6rem}

    .overflow-hidden{overflow:hidden}

    .transition-opacity{transition-property:opacity}
    .duration-700{transition-duration:.7s}
    .ease-out{transition-timing-function:ease-out}
    .opacity-0{opacity:0}.opacity-100{opacity:1}

    .max-w-7xl{max-width:80rem}
    .max-w-4xl{max-width:56rem}
    .max-w-3xl{max-width:48rem}
    .max-w-2xl{max-width:42rem}
    .max-w-md{max-width:28rem}

    .aspect-video{position:relative;padding-top:56.25%}

    /* Escaped responsive classes (to match your existing markup) */
    @media (min-width:640px){
      .sm\:text-7xl{font-size:4.5rem;line-height:1}
      .sm\:text-5xl{font-size:3rem;line-height:1.1}
      .sm\:py-32{padding-top:8rem;padding-bottom:8rem}
    }
    @media (min-width:768px){
      .md\:flex{display:flex}
      .md\:hidden{display:none !important}
      .md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
      .md\:text-left{text-align:left}
    }
    @media (min-width:1024px){
      .lg\:px-8{padding-left:2rem;padding-right:2rem}
      .lg\:pt-24{padding-top:6rem}
      .lg\:pb-32{padding-bottom:8rem}
      .lg\:max-w-none{max-width:none}
      .lg\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
    }

    /* Typography scale used */
    .text-6xl{font-size:3.75rem;line-height:1}
    .text-4xl{font-size:2.25rem;line-height:1.2}
    .text-xl{font-size:1.25rem;line-height:1.6}

    /* Nav tweaks */
    .nav-link{color:var(--thelo-text);text-decoration:none;transition:color .2s}
    .nav-link:hover{color:var(--thelo-blue)}
    #mainNav{backdrop-filter:blur(6px)}

    /* Window-like card */
    .window-container{
      position:relative;background:#fff;border:1px solid var(--grid-color);
      border-radius:.75rem;padding:2.5rem;
    }
    .window-container::before{
      content:'';position:absolute;top:1rem;left:1rem;width:52px;height:12px;
      background-image:url("data:image/svg+xml,%3Csvg width='52' height='12' viewBox='0 0 52 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='6' cy='6' r='6' fill='%23FF5F56'/%3E%3Ccircle cx='26' cy='6' r='6' fill='%23FFBD2E'/%3E%3Ccircle cx='46' cy='6' r='6' fill='%2327C93F'/%3E%3C/svg%3E");
      background-repeat:no-repeat;
    }

    /* Buttons / focus ring for the hamburger */
    #mobileMenuButton{
      border-radius:.375rem;padding:.5rem;color:var(--slate-600);background:transparent;border:0;
      cursor:pointer;
    }
    #mobileMenuButton:hover{background:#f1f5f9}
    #mobileMenuButton:focus{outline:2px solid rgba(37,99,235,.5);outline-offset:2px}

    /* Hero tag pill */
    .pill{
      display:inline-block;border-radius:9999px;background:var(--thelo-blue);
      padding:.375rem 1rem;font-weight:800;color:#fff;font-size:1.125rem
    }

    /* Drawing replay canvas full cover */
    #drawing-replay .aspect-video > canvas{
      position:absolute;inset:0;width:100%;height:100%;background:transparent
    }

    /* Feedback overlay: bottom-right, slightly above bottom */
    #replay-feedback{
      position:absolute;right:1.5rem;bottom:96px; /* adjust this to nudge up/down */
      pointer-events:none;
    }
    #replay-feedback .bubble{
      max-width:28rem;padding:1rem;
      background:rgba(255,255,255,.7);
      backdrop-filter:blur(6px);
      border:1px solid var(--slate-200);
      border-radius:1rem;box-shadow:0 4px 6px rgba(0,0,0,.07);
      pointer-events:auto;
    }
  </style>
</head>

<body>

  <nav id="mainNav" class="w-full z-50 border-b border-slate-200 bg-transparent sticky top-0">
    <div class="mx-auto flex max-w-7xl items-center justify-between px-6 py-3 lg:px-8">
      <a href="/" class="flex items-center" style="gap:.5rem">
        <img src="https://thelo.space/img/bluethelo.svg" alt="thelo logo" class="h-9 w-auto" />
      </a>
      <ul class="hidden gap-8 md:flex">
        <li><a href="#why" class="nav-link font-semibold" data-i18n="navWhy">Why thelo?</a></li>
        <li><a href="#thelopad" class="nav-link font-semibold" data-i18n="navThelopad">How It Works</a></li>
        <li><a href="https://thelo.space/auth" class="nav-link font-semibold" data-i18n="navAuth">Log in</a></li>
        <li><a href="#contact" class="nav-link font-semibold" data-i18n="navContact">Contact</a></li>
      </ul>
      <div class="flex items-center gap-4">
        <button id="mobileMenuButton" class="md:hidden" aria-label="Open menu">
          <svg class="h-9 w-9" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
          </svg>
        </button>
      </div>
    </div>
    <div id="mobileMenu" class="hidden md:hidden">
      <ul class="bg-white border-t border-slate-200 px-4 pt-2 pb-4">
        <li><a href="#why" class="block py-2 nav-link font-semibold" data-i18n="navWhy">Why thelo?</a></li>
        <li><a href="#thelopad" class="block py-2 nav-link font-semibold" data-i18n="navThelopad">How It Works</a></li>
        <li><a href="https://thelo.space/auth" class="block py-2 nav-link font-semibold" data-i18n="navAuth">Log in</a></li>
        <li><a href="#contact" class="block py-2 nav-link font-semibold" data-i18n="navContact">Contact</a></li>
        <li><a href="https://thelo.space/satmathteam/" class="nav-link font-semibold" data-i18n="navJoin">Join</a></li>
      </ul>
    </div>
  </nav>

  <header class="relative overflow-hidden pt-16 pb-24 lg:pt-24 lg:pb-32">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
      <div class="grid max-w-2xl grid-cols-1 gap-x-12 gap-y-16 lg:max-w-none lg:grid-cols-2">
        <div class="anim-target">
          <h1 class="text-6xl font-extrabold tracking-tighter text-[var(--thelo-text)] sm:text-7xl" data-i18n="heroTitle"> </h1>
        </div>
        <div class="anim-target" style="display:flex;flex-direction:column;justify-content:center;transition-delay:.1s">
          <p class="text-lg font-semibold" data-i18n="heroP1"></p>
          <p class="mt-4 text-lg text-slate-600" data-i18n="heroP2" style="margin-top:1rem"></p>
          <p class="text-lg text-slate-600" data-i18n="heroP3" style="margin-top:1rem"></p>
        </div>
      </div>
    </div>
  </header>

  <section id="why" class="py-24 sm:py-32">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
      <div class="mx-auto max-w-3xl text-center anim-target">
        <h2 class="text-4xl font-extrabold text-[var(--thelo-text)] sm:text-5xl" data-i18n="whyTitle"></h2>
      </div>
      <div class="mt-16 window-container anim-target" style="transition-delay:.2s;margin-top:4rem">
        <div class="grid grid-cols-1 gap-12 text-center md:grid-cols-3 md:text-left pt-8">
          <div>
            <h3 class="text-xl font-bold text-[var(--thelo-text)]" data-i18n="why1h"></h3>
            <p class="mt-2 text-slate-600" data-i18n="why1p" style="margin-top:.5rem"></p>
          </div>
          <div>
            <h3 class="text-xl font-bold text-[var(--thelo-text)]" data-i18n="why2h"></h3>
            <p class="mt-2 text-slate-600" data-i18n="why2p" style="margin-top:.5rem"></p>
          </div>
          <div>
            <h3 class="text-xl font-bold text-[var(--thelo-text)]" data-i18n="why3h"></h3>
            <p class="mt-2 text-slate-600" data-i18n="why3p" style="margin-top:.5rem"></p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="thelopad" class="py-24 sm:py-32">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
      <div class="grid grid-cols-1 gap-x-16 gap-y-10 lg:grid-cols-2" style="column-gap:4rem;row-gap:2.5rem">
        <div class="flex flex-col justify-center anim-target">
          <h2 class="text-4xl font-extrabold text-[var(--thelo-text)] sm:text-5xl" data-i18n="thelopadTitle"></h2>
          <div class="pill" data-i18n="thelopadTag" style="margin-top:1rem"></div>
          <p class="mt-8 text-slate-600 text-lg" data-i18n="thelopadSub" style="margin-top:2rem"></p>
        </div>
        <div class="anim-target" style="transition-delay:.2s">
          <img src="https://thelo.space/img/theloLaptop.png" alt="A mockup of the thelopad tablet and a laptop showing thelo's interface" class="w-full h-auto object-contain">
        </div>
      </div>
    </div>
  </section>

  <section id="drawing-replay" class="py-24 sm:py-32">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
      <div class="relative w-full aspect-video">
        <canvas id="replayCanvas" class="absolute top-0 left-0 w-full h-full bg-transparent"></canvas>

        <!-- Feedback overlay (now clean CSS, no invalid inline styles) -->
        <div id="replay-feedback" class="right-6 opacity-0 transition-opacity duration-700 ease-out">
          <div class="bubble">
            <p class="font-semibold text-slate-800">That is the correct formula. Great work! 🎉</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="contact" class="py-24 sm:py-32">
    <div class="mx-auto max-w-4xl px-6 text-center">
      <div class="anim-target">
        <h2 class="text-4xl font-extrabold text-[var(--thelo-text)] sm:text-5xl" data-i18n="contactTitle">Contact Aram</h2>
        <p class="mt-6 text-lg text-slate-600" data-i18n="contactSub" style="margin-top:1.5rem">I am actively seeking partners, mentors, and institutions to help grow thelo. The best way to connect is to schedule a 30-minute call directly in my calendar below. I look forward to speaking with you.</p>
      </div>
      <div class="anim-target" style="transition-delay:.1s;margin-top:2rem;color:var(--slate-600)">
        <p class="mb-4" data-i18n="contactAlt" style="margin-bottom:1rem">Or, contact me directly:</p>
        <div class="flex" style="flex-direction:column;gap:1rem;align-items:center;justify-content:center}
            @media(min-width:640px){.contact-row{flex-direction:row;gap:2rem}}">
        </div>
        <div class="flex contact-row" style="flex-direction:column;gap:1rem;align-items:center;justify-content:center">
          <a href="mailto:aramasatryan290@gmail.com" class="font-semibold nav-link" style="display:inline-flex;align-items:center;gap:.5rem">
            <i class="fas fa-envelope fa-fw"></i> <span>aramasatryan290@gmail.com</span>
          </a>
          <a href="tel:+37477411798" class="font-semibold nav-link" style="display:inline-flex;align-items:center;gap:.5rem">
            <i class="fas fa-phone fa-fw"></i> <span data-i18n="contactPhone">+374 77 411 798</span>
          </a>
        </div>
      </div>
      <div class="calendly-inline-widget anim-target" data-url="https://calendly.com/aramasatryan290/30min" style="min-width:320px;height:700px;transition-delay:.2s;margin-top:3rem"></div>
      <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
    </div>
  </section>

  <footer class="py-10 text-center text-sm text-slate-500">
    <p data-i18n="footer"></p>
  </footer>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

    document.addEventListener('DOMContentLoaded', () => {

      const loginAnchor = document.querySelector('[data-i18n="navAuth"]');
      const mobileMenuButton = document.getElementById('mobileMenuButton');
      const mobileMenu = document.getElementById('mobileMenu');
      let currentUser = null;

      const strings = {
        en: {
          navAuth:'Log in', navDash:'Dashboard', title:'thelo',
          navWhy:'Why thelo?', navThelopad:'How It Works', navContact:'Contact', navJoin:'Join',
          heroTitle:'Weaving <br><span class="text-[var(--thelo-blue)]">Education.</span>',
          heroP1:'thelo merges the natural feel of pencil on paper with the power of a personal AI tutor.',
          heroP2:'Write your solutions in a normal notebook placed on our tablet. thelo digitizes your work instantly and guides you, step-by-step.',
          heroP3:'It’s the most intuitive way to master math.',
          whyTitle:'The Best of Both Worlds',
          why1h:'Write on Real Paper',
          why1p:'No more slippery screens. Get the tactile feedback of writing on paper, which is proven to improve retention and understanding.',
          why2h:'Instant AI Analysis',
          why2p:'As you write, our AI analyzes your work, providing hints and feedback just like a real tutor would. No waiting, no scanning.',
          why3h:'Keep Your Notes',
          why3p:'At the end of a session, you have a physical copy of your work in your notebook, and a digital record of your progress in the cloud.',
          thelopadTitle:'How Does It Work?', thelopadTag:'Simple & Intuitive',
          thelopadSub:'Our system uses a standard drawing tablet and a special stylus with a graphite tip. You simply place your own paper on the tablet and start writing. The tablet captures the position of your pen, while the graphite leaves a real mark on your paper. It’s a seamless bridge between the physical and digital, requiring no new skills to learn.',
          contactTitle:'Contact Aram',
          contactSub:'I am actively seeking partners, mentors, and institutions to help grow thelo. The best way to connect is to schedule a 30-minute call directly in my calendar below. I look forward to speaking with you.',
          contactAlt:'Or, contact me directly:',
          contactPhone:'+374 77 411 798',
          footer:'© 2025 thelo'
        }
      };

      function updateAuthUI(){
        if(!loginAnchor) return;
        const T = strings.en;
        const mobileAuth = document.querySelector('#mobileMenu a[data-i18n="navAuth"]');
        if(currentUser){
          loginAnchor.href = "/sdashboard";
          loginAnchor.textContent = T.navDash;
          if(mobileAuth) mobileAuth.textContent = T.navDash;
        }else{
          loginAnchor.href = "/auth";
          loginAnchor.textContent = T.navAuth;
          if(mobileAuth) mobileAuth.textContent = T.navAuth;
        }
      }

      function applyContent(){
        const T = strings.en;
        document.querySelectorAll('[data-i18n]').forEach(el=>{
          const key = el.dataset.i18n;
          if(key !== 'navAuth' && T[key]) el.innerHTML = T[key];
        });
        updateAuthUI();
      }

      const firebaseConfig = {
        apiKey:"AIzaSyAbnPpcIt88B0jIAoLUdC71zmQDvR_fdu8",
        authDomain:"physmathacademy-722b3.firebaseapp.com",
        projectId:"physmathacademy-722b3",
        storageBucket:"physmathacademy-722b3.appspot.com",
        appId:"1:1093640992262:web:35b1bf4d2364bcf745f587"
      };
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);

      onAuthStateChanged(auth, user => { currentUser = user; updateAuthUI(); });

      mobileMenuButton.addEventListener('click', ()=>{ mobileMenu.classList.toggle('hidden'); });
      document.querySelectorAll('#mobileMenu a').forEach(link=>{
        link.addEventListener('click', ()=> mobileMenu.classList.add('hidden'));
      });

      const animationObserver = new IntersectionObserver((entries)=>{
        entries.forEach(entry=>{
          if(entry.isIntersecting){
            entry.target.classList.add('is-visible');
            animationObserver.unobserve(entry.target);
          }
        });
      },{threshold:0.1});
      document.querySelectorAll('.anim-target').forEach(el=>animationObserver.observe(el));

      // ===== Drawing Replay Logic (unchanged, with fixed feedback fade-in) =====
      const setupDrawingReplay = () => {
        const canvas = document.getElementById('replayCanvas');
        const feedbackEl = document.getElementById('replay-feedback');
        if(!canvas || !feedbackEl) return;

        const ctx = canvas.getContext('2d');
        let drawingData = null;
        let animationFrameId = null;
        const dpr = window.devicePixelRatio || 1;

        const resizeCanvas = () => {
          const rect = canvas.getBoundingClientRect();
          canvas.width = rect.width * dpr;
          canvas.height = rect.height * dpr;
          ctx.setTransform(dpr,0,0,dpr,0,0);
          if(drawingData){ renderDrawingAtTime(Infinity, drawingData, ctx); }
        };

        const renderDrawingAtTime = (targetTime, data, context) => {
          const cw = context.canvas.width / dpr;
          const ch = context.canvas.height / dpr;
          context.clearRect(0,0,cw,ch);
          context.lineCap='round';context.lineJoin='round';

          data.strokes.forEach(stroke=>{
            const strokeStart = stroke.startTime || 0;
            if(targetTime < strokeStart) return;

            context.strokeStyle = stroke.color || '#2563EB';
            context.lineWidth = stroke.lineWidth || 4;

            context.beginPath();
            let moved = false;
            for(let i=0;i<stroke.points.length;i++){
              const p = stroke.points[i];
              const tAbs = strokeStart + (p.timeOffset || 0);
              if(tAbs > targetTime) break;
              const x = p.normX * cw;
              const y = p.normY * ch;
              if(!moved){ context.moveTo(x,y); moved = true; } else { context.lineTo(x,y); }
            }
            if(moved) context.stroke();
          });
        };

        const startReplayAnimation = (data) => {
          if(animationFrameId) cancelAnimationFrame(animationFrameId);
          let start = 0;
          const total = data.strokes.reduce((m,s)=>Math.max(m, s.endTime), 0);

          const tick = (ts) => {
            if(!start) start = ts;
            const elapsed = ts - start;
            renderDrawingAtTime(elapsed, data, ctx);

            if(elapsed < total){
              animationFrameId = requestAnimationFrame(tick);
            }else{
              renderDrawingAtTime(Infinity, data, ctx);
              animationFrameId = null;
              setTimeout(()=>{
                feedbackEl.classList.remove('opacity-0');
                feedbackEl.classList.add('opacity-100');
              }, 500);
            }
          };
          animationFrameId = requestAnimationFrame(tick);
        };

        const replayObserver = new IntersectionObserver(async (entries, observer)=>{
          const entry = entries[0];
          if(entry.isIntersecting){
            try{
              const resp = await fetch('https://thelo.space/lessons/drawings/main.json');
              if(!resp.ok) throw new Error(`HTTP ${resp.status}`);
              drawingData = await resp.json();
              resizeCanvas();
              startReplayAnimation(drawingData);
              observer.unobserve(canvas);
            }catch(err){ console.error('Failed to load drawing data:', err); }
          }
        },{threshold:0.4});

        replayObserver.observe(canvas);
        window.addEventListener('resize', resizeCanvas);
      };

      setupDrawingReplay();
      applyContent();
    });
  </script>

</body>
</html>
