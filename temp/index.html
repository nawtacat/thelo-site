<!DOCTYPE html>
<html>
<head>
    <title>Desmos API Typing and Zoom Demo</title>
    <style>
        /* Styles to make the calculator visible on the page */
        #calculator {
            width: 600px;
            height: 400px;
            border: 1px solid #333;
            margin: 20px auto;
        }
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
    <script src="https://www.desmos.com/api/v1.9/calculator.js?apiKey=d752c00d5a6b7d2f33c3a9d564175b9f"></script>
</head>
<body>

    <h1>Desmos API Demo: Typing and Zoom</h1>
    <p>Click the button to start the scripted demonstration.</p>
    
    <div id="calculator"></div>
    <button onclick="startDemo()">Run Demonstration</button>

    <script>
        let calculator;
        
        // This function initializes the calculator when the page loads
        window.onload = function() {
            const elt = document.getElementById('calculator');
            // Initialize the calculator with some basic settings (e.g., hiding the keypad)
            calculator = Desmos.Calculator(elt, {
                keypad: false,
                expressions: false,
                settingsMenu: false
            });
        };

        // The core function to run the scripted demo
        function startDemo() {
            // Define the equation to "type"
            const fullEquation = 'y=x^2'; 
            
            // Start with an empty expression, giving it a unique ID
            calculator.setExpression({ id: 'demoEq', latex: '' });
            
            let currentIndex = 0;
            const typingInterval = 150; // Milliseconds between each character

            // Function to simulate typing one character at a time
            function typeNextCharacter() {
                if (currentIndex < fullEquation.length) {
                    const currentLatex = fullEquation.substring(0, currentIndex + 1);
                    
                    // Update the expression in Desmos with the new substring
                    calculator.setExpression({ id: 'demoEq', latex: currentLatex });
                    
                    currentIndex++;
                    
                    // Schedule the next character to be typed
                    setTimeout(typeNextCharacter, typingInterval);
                } else {
                    // All characters are typed, now perform the zoom/pan action
                    setTimeout(zoomToFocus, 1000); // Wait 1 second after typing finishes
                }
            }

            // Function to zoom and pan the graph (Viewport Control)
            function zoomToFocus() {
                // Set the viewport (x-min, x-max, y-min, y-max)
                // This will zoom in to focus on the vertex (0,0) and the surrounding area.
                
                // 
                calculator.setMathBounds({
                    left: -2,    // X-min
                    right: 2,   // X-max
                    bottom: -1, // Y-min
                    top: 5      // Y-max
                });
                
                console.log('Demonstration Complete: Equation typed and graph zoomed.');
            }

            // Begin the typing process
            typeNextCharacter();
        }
    </script>

</body>
</html>
