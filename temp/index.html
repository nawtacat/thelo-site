<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="dashboardTitle">Thelo Student Dashboard</title>
    <link rel="icon" href="https://thelo.space/img/thelofavicon.png" type="image/png" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;700;800&family=Noto+Serif+Armenian:wght@400;700&display=swap" rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

    <style>
        :root {
            --thelo-blue: #2563EB;
            --thelo-bg: #F8F9FA; /* This is the base background for the grid itself */
            --thelo-text: #111827;
            --grid-color: #E5E7EB;
            --card-hover-shadow: 0 8px 15px rgba(0, 0, 0, 0.08); /* Slightly lighter hover shadow */
        }

        html {
            scroll-behavior: smooth;
            overflow-x: hidden; /* Prevent horizontal scroll */
        }

        body {
            font-family: 'Manrope', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--thelo-bg);
            color: var(--thelo-text);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            
            /* The signature grid background directly on the body */
            background-image:
                linear-gradient(to right, var(--grid-color) 1px, transparent 1px),
                linear-gradient(to bottom, var(--grid-color) 1px, transparent 1px);
            background-size: 40px 40px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 0; /* Ensure no default body padding */
            margin: 0; /* Ensure no default body margin */
            overflow-x: hidden; /* Prevent horizontal scroll */
        }

        /* Language-specific font rules */
        html[lang="en"] body {
            font-family: 'Manrope', sans-serif;
        }
        html[lang="hy"] body {
            font-family: "Noto Serif Armenian", serif;
        }

        h1, h2, h3, h4, h5, h6 {
            font-weight: 800; /* Bolder Manrope */
        }
        html[lang="hy"] h1, 
        html[lang="hy"] h2, 
        html[lang="hy"] h3, 
        html[lang="hy"] h4, 
        html[lang="hy"] h5, 
        html[lang="hy"] h6 {
            font-weight: 700; /* Bolder Noto Serif Armenian */
        }
        #join-class h2 { text-align: center; }


        /* Header (Minimalist and Transparent) */
        header {
            background-color: transparent; /* No white box on navbar */
            backdrop-filter: none; /* No blur */
            border-bottom: none; /* No border */
            padding: 1.5rem 2.5rem; /* Enhanced padding from borders */
            display: flex;
            justify-content: space-between; /* Space out logo and right section */
            align-items: center;
            width: 100%;
            z-index: 10; /* Ensure it stays on top */
            position: relative; 
        }
        /* REMOVED macOS style window buttons from header and page */
        header::before, #welcome-overview::before {
            display: none;
        }

        /* Main Content Area â€“ cap it a little tighter */
        main{
            flex-grow: 1;
            padding: 3rem 2.5rem;
            width: 100%;

            /* 1400 px hard ceiling, but on smaller screens stay 88 % of the viewport */
            max-width: min(1400px, 88vw);

            margin-inline: auto;
            overflow-x: hidden;
        }




        section {
            margin-bottom: 4.5rem; /* More space between sections */
        }

        /* Card Style (General purpose for progress, topic, course) */
        .thelo-card {
            background-color: white; /* White background for individual cards */
            border: 1px solid var(--grid-color);
            border-radius: 0.75rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            padding: 2rem; /* Increased padding within cards */
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; /* Add transition for hover */
        }

        .thelo-card:hover {
            transform: translateY(-5px); /* Lift card on hover */
            box-shadow: var(--card-hover-shadow); /* Stronger shadow on hover */
        }

        /* Primary Button Style */
        .thelo-btn {
            background-color: var(--thelo-blue);
            color: white;
            font-weight: 700;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .thelo-btn:hover {
            background-color: #1a56d2;
            transform: translateY(-2px);
        }

        /* Secondary Button Style */
        .thelo-btn-secondary {
            background-color: transparent;
            color: var(--thelo-blue);
            border: 1px solid var(--thelo-blue);
            font-weight: 700;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .thelo-btn-secondary:hover {
            background-color: var(--thelo-blue);
            color: white;
        }

        /* Progress Bar */
        .progress-bar-container {
            width: 100%;
            background-color: var(--grid-color);
            border-radius: 0.5rem;
            overflow: hidden;
        }
        .progress-bar {
            height: 10px;
            background-color: var(--thelo-blue);
            border-radius: 0.5rem;
            transition: width 0.5s ease-in-out;
        }

        /* Specific styles for elements within new structure */
        .topic-card-context {
            font-size: 0.85rem;  
            color: #6B7280;
            margin-bottom: 0.5rem;
        }

        /* Course Item Styling (accordion header) */
        .course-item {
            background-color: white;
            border: 1px solid var(--grid-color);
            border-radius: 0.75rem;
            margin-bottom: 1rem; /* Space between courses */
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.03);
        }

        .course-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.5rem 2rem;
            cursor: pointer;
            font-weight: 700;
            color: var(--thelo-text);
            transition: background-color 0.2s ease-in-out;
        }
        .course-header:hover {
            background-color: #F3F4F6; /* light gray hover */
        }

        .course-header .course-info {
            flex-grow: 1;
        }

        .course-header .course-title-text {
            font-size: 1.25rem; /* text-xl */
            font-weight: 800;
        }

        .course-header .course-meta {
            font-size: 0.9rem;
            color: #6B7280;
            margin-top: 0.5rem;
        }
        
        .course-header .expand-icon {
            margin-left: 1.5rem;
            transition: transform 0.3s ease-in-out;
        }
        .course-header.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .course-content {
            padding: 0 2rem 1.5rem 2rem;
            display: none; /* Hidden by default */
            max-height: 0; /* For smooth accordion animation */
            overflow: hidden; /* Hide overflow during animation */
            transition: max-height 0.3s ease-out; /* Smooth transition for expand/collapse */
        }
        .course-content.active {
            max-height: fit-content; /* Will be set by JS dynamically */
        }

        .unit-item {
            background-color: var(--thelo-bg); /* Use thelo-bg for units */
            border: 1px solid #D1D5DB; /* Slightly darker border for units */
            border-radius: 0.5rem;
            margin-top: 1rem;
            padding: 1rem 1.5rem;
        }
        .unit-title {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
        }
        .topic-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .topic-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px dashed #E5E7EB; /* Dashed separator */
            font-size: 0.95rem;
        }
        .topic-item:last-child {
            border-bottom: none;
        }
        .topic-item-name {
            flex-grow: 1; /* Allow name to take space */
            margin-right: 1rem; /* Space before status/button */
        }
        .topic-item-status {
            font-weight: 600;
            margin-left: 1rem;
            min-width: 100px; /* Give status some room */
            text-align: right;
        }
        .topic-item-status .fa-check-circle { color: #10B981; /* Green */ }
        .topic-item-status .fa-clock { color: #F59E0B; /* Amber */ }
        .topic-item-status .fa-times-circle { color: #EF4444; /* Red */ }

        .topic-action-btn {
            background-color: var(--thelo-blue);
            color: white;
            font-weight: 600;
            padding: 0.4rem 0.8rem;
            border-radius: 0.3rem;
            transition: background-color 0.2s ease-in-out;
            margin-left: 1rem; /* Space between status and button */
        }
        .topic-action-btn:hover {
            background-color: #1a56d2;
        }

        /* Profile Photo in Navbar (now acts as settings button) */
        .profile-photo-nav {
            width: 40px;  
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            cursor: pointer;
            border: 2px solid transparent; /* No border initially */
            transition: border-color 0.2s ease-in-out, transform 0.2s ease-in-out;
        }
        .profile-photo-nav:hover {
            border-color: var(--thelo-blue); /* Blue border on hover */
            transform: scale(1.05);
        }

        /* Thelobook button in Navbar */
        .thelobook-nav-btn {
            background-color: transparent;
            color: var(--thelo-text);
            font-weight: 700;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: color 0.2s, background-color 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .thelobook-nav-btn:hover {
            color: var(--thelo-blue);
            background-color: rgba(37, 99, 235, 0.1);
        }
        
        /* Specific Styles for Achievements/Encouragement Section */
        .achievement-card {
            background-color: white;
            border: 1px solid var(--grid-color);
            border-radius: 0.75rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            padding: 2rem;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .achievement-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--card-hover-shadow);
        }
        .achievement-icon {
            font-size: 3rem;
            color: var(--thelo-blue);
            margin-bottom: 1rem;
        }
        .achievement-message {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--thelo-text);
        }
        .achievement-description {
            font-size: 1rem;
            color: #6B7280;
            margin-top: 0.5rem;
        }

        /* Join Class Section */
        .join-class-card {
            background-color: white;
            border: 1px solid var(--grid-color);
            border-radius: 0.75rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            padding: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        .join-class-card input {
            margin-bottom: 1rem;
        }

        /* REMOVED macOS style window buttons CSS */
        #welcome-stats::before { 
            display: none; 
        }
        #welcome-stats { 
            position: relative; 
            padding-top: 0; 
        }
        #welcome-stats h2 { 
            margin-top: 0; 
        }

        /* Mobile adjustments */
        @media (max-width: 767px) {
            header {
                padding: 1rem 1.5rem; 
                flex-direction: row;  
                justify-content: space-between; 
                align-items: center;
            }
            header > div:last-child { 
                width: auto; 
                margin-top: 0; 
            }
            main {
                padding: 1.5rem;  
            }
            section {
                margin-bottom: 3rem;  
            }
            .thelo-card {
                padding: 1.25rem;
            }
            #primary-action-cards {
                gap: 1.5rem;
            }

            .course-header {
                padding: 1rem 1.5rem;
                flex-wrap: wrap;  
            }
            .course-header .course-info {
                width: 100%;
                margin-bottom: 0.5rem;
            }
            .course-header .course-meta {
                width: 100%;
                text-align: left;
                margin-top: 0;
            }
            .course-header .expand-icon {
                margin-left: auto;  
            }
            .course-content {
                padding: 0 1.5rem 1rem 1.5rem;
            }
            .unit-item {
                padding: 0.75rem 1rem;
            }
            .unit-title {
                margin-bottom: 0.5rem;
            }
            .topic-list {
                list-style: none;
                padding: 0;
                margin: 0;
            }
            .topic-item {
                flex-wrap: wrap;
                padding: 0.5rem 0;
            }
            .topic-item-name {
                width: calc(100% - 70px);  
                flex-grow: 1;
            }
            .topic-item-status {
                margin-left: 0;
                order: 3;  
                width: 100%;
                text-align: left;
                margin-top: 0.25rem;
            }
            .topic-action-btn {
                margin-left: auto;  
            }
            /* REMOVED mobile macOS dots CSS */
            #welcome-stats::before { 
                display: none;
            }
            #welcome-stats { 
                padding-top: 0;  
            }
        }
    </style>
</head>
<body class="antialiased">

    <header>
        <div class="flex items-center gap-4">
            <img src="https://thelo.space/img/thelo-Photoroom.png" alt="Thelo logo" class="h-10 w-auto" />
        </div>
        <div class="flex items-center gap-4">
            <button id="open-thelobook-btn" class="thelobook-nav-btn">
                <i class="fas fa-book-open mr-2"></i> <span data-i18n="thelobookBtnText">thelobook</span>
            </button>
            <img id="profile-photo-nav" src="https://via.placeholder.com/150/2563EB/FFFFFF?text=P" alt="Profile Photo" class="profile-photo-nav" title="Profile Settings">
        </div>
    </header>

    <main>
        <section id="welcome-stats" class="mb-12">
            <h2 class="text-3xl lg:text-4xl font-extrabold text-[var(--thelo-text)] mb-8">
                <span data-i18n="welcomeGreetingPrefix">Good afternoon, </span><span id="student-name">Student</span>!
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="thelo-card flex flex-col items-start">
                    <h3 class="text-xl font-semibold mb-3" data-i18n="pointsTitle">Points</h3>
                    <p class="text-5xl font-bold text-[var(--thelo-blue)]" id="student-points">0</p>
                </div>
                <div class="thelo-card flex flex-col items-start">
                    <h3 class="text-xl font-semibold mb-3" data-i18n="lessonsCompletedTitle">Lessons Completed</h3>
                    <p class="text-5xl font-bold text-[var(--thelo-blue)]" id="lessons-completed-count">0</p>
                </div>
                <div class="thelo-card flex flex-col items-start">
                    <h3 class="text-xl font-semibold mb-3" data-i18n="streakTitle">Current Streak</h3>
                    <p class="text-5xl font-bold text-[var(--thelo-blue)]" id="streak-count">0 <span class="text-orange-500">ğŸ”¥</span></p>
                </div>
            </div>
        </section>

        <section id="continue-practice" class="mb-12">
            <h2 class="text-2xl lg:text-3xl font-extrabold text-[var(--thelo-text)] mb-6" data-i18n="continuePracticeTitle">Continue Practice</h2>
            
            <div id="in-progress-lesson-card" class="thelo-card flex flex-col items-start hidden">
                <div>
                    <p class="text-sm text-slate-600 mb-2" data-i18n="lastTopicContext">Last Topic: <span class="font-semibold text-[var(--thelo-blue)]" id="last-topic-name">Area of Circles</span></p>
                    <p class="text-sm text-slate-600 mb-2" data-i18n="topicStats"><span id="problems-count">0</span> Problems â€¢ <span id="progress-percentage">0%</span> Complete</p>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="last-topic-progress-bar" style="width: 0%;"></div>
                    </div>
                </div>
                <button id="resume-practice-btn" class="thelo-btn w-full mt-4" data-i18n="resumePracticeBtn">
                    <i class="fas fa-play-circle mr-2"></i> Resume Practice
                </button>
            </div>
            
            <div id="no-in-progress-message" class="thelo-card text-center py-8">
                <p class="text-lg text-slate-600" data-i18n="noInProgressMessage">No in-progress lessons. Start a new topic below!</p>
            </div>
        </section>

        <section id="sat-math-units" class="mb-12">
            <h2 class="text-2xl lg:text-3xl font-extrabold text-[var(--thelo-text)] mb-6" data-i18n="satMathUnitsTitle">SAT Math Units (Bulk Practice)</h2>
            
            <div id="units-accordion">
                <div class="course-item">
                    <div class="course-header" data-unit-id="arithmetic">
                        <div class="course-info">
                            <h3 class="course-title-text" data-i18n="unit1Title">Unit 1: Arithmetic & Number Properties</h3>
                            <p class="course-meta" data-i18n="unitTopicsCount">5 Topics</p>
                        </div>
                        <i class="fas fa-chevron-down expand-icon ml-4"></i>
                    </div>
                    <div class="course-content">
                        <div class="unit-item">
                            <ul class="topic-list">
                                <li class="topic-item">
                                    <span class="topic-item-name" data-i18n="topic1_1">Place Value & Number Types</span>
                                    <span class="topic-item-status text-green-600"><i class="fas fa-check-circle mr-1"></i> <span data-i18n="statusCompleted">Completed</span></span>
                                    <button class="topic-action-btn" data-i18n="btnReview">Review</button>
                                </li>
                                <li class="topic-item">
                                    <span class="topic-item-name" data-i18n="topic1_2">Factors, Multiples & Divisibility</span>
                                    <span class="topic-item-status text-amber-600"><i class="fas fa-clock mr-1"></i> <span data-i18n="statusInProgress">In Progress</span></span>
                                    <button class="topic-action-btn" data-i18n="btnResume">Resume</button>
                                </li>
                                <li class="topic-item">
                                    <span class="topic-item-name" data-i18n="topic1_3">Fractions, Decimals & Percents</span>
                                    <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
                                    <button class="topic-action-btn" data-i18n="btnStart">Start</button>
                                </li>
                                <li class="topic-item">
                                    <span class="topic-item-name" data-i18n="topic1_4">Ratio & Proportion</span>
                                    <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
                                    <button class="topic-action-btn" data-i18n="btnStart">Start</button>
                                </li>
                                <li class="topic-item">
                                    <span class="topic-item-name" data-i18n="topic1_5">Arithmetic Word Problems</span>
                                    <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
                                    <button class="topic-action-btn" data-i18n="btnStart">Start</button>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="course-item">
                    <div class="course-header" data-unit-id="algebra">
                        <div class="course-info">
                            <h3 class="course-title-text" data-i18n="unit2Title">Unit 2: Algebra & Linear Equations</h3>
                            <p class="course-meta" data-i18n="unitTopicsCount2">5 Topics</p>
                        </div>
                        <i class="fas fa-chevron-down expand-icon ml-4"></i>
                    </div>
                    <div class="course-content">
                        <div class="unit-item">
                            <ul class="topic-list">
                                <li class="topic-item">
                                    <span class="topic-item-name" data-i18n="topic2_1">Solving Linear Equations</span>
                                    <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
                                    <button class="topic-action-btn" data-i18n="btnStart">Start</button>
                                </li>
                                <li class="topic-item">
                                    <span class="topic-item-name" data-i18n="topic2_2">Inequalities</span>
                                    <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
                                    <button class="topic-action-btn" data-i18n="btnStart">Start</button>
                                </li>
                                <li class="topic-item">
                                    <span class="topic-item-name" data-i18n="topic2_3">Linear Word Problems</span>
                                    <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
                                    <button class="topic-action-btn" data-i18n="btnStart">Start</button>
                                </li>
                                <li class="topic-item">
                                    <span class="topic-item-name" data-i18n="topic2_4">Graphs of Linear Equations</span>
                                    <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
                                    <button class="topic-action-btn" data-i18n="btnStart">Start</button>
                                </li>
                                <li class="topic-item">
                                    <span class="topic-item-name" data-i18n="topic2_5">Systems of Equations</span>
                                    <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
                                    <button class="topic-action-btn" data-i18n="btnStart">Start</button>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="course-item">
                    <div class="course-header" data-unit-id="geometry">
                        <div class="course-info">
                            <h3 class="course-title-text" data-i18n="unit3Title">Unit 3: Geometry & Measurement</h3>
                            <p class="course-meta" data-i18n="unitTopicsCount3">5 Topics</p>
                        </div>
                        <i class="fas fa-chevron-down expand-icon ml-4"></i>
                    </div>
                    <div class="course-content">
                        <div class="unit-item">
                            <ul class="topic-list">
                                <li class="topic-item">
                                    <span class="topic-item-name" data-i18n="topic3_1">Area and Perimeter (including Circles)</span>
                                    <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
                                    <button class="topic-action-btn" data-i18n="btnStart">Start</button>
                                </li>
                                <li class="topic-item">
                                    <span class="topic-item-name" data-i18n="topic3_2">Volume & Surface Area</span>
                                    <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
                                    <button class="topic-action-btn" data-i18n="btnStart">Start</button>
                                </li>
                                <li class="topic-item">
                                    <span class="topic-item-name" data-i18n="topic3_3">Triangle Properties</span>
                                    <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
                                    <button class="topic-action-btn" data-i18n="btnStart">Start</button>
                                </li>
                                <li class="topic-item">
                                    <span class="topic-item-name" data-i18n="topic3_4">Coordinate Geometry</span>
                                    <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
                                    <button class="topic-action-btn" data-i18n="btnStart">Start</button>
                                </li>
                                <li class="topic-item">
                                    <span class="topic-item-name" data-i18n="topic3_5">Angles & Parallel Lines</span>
                                    <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
                                    <button class="topic-action-btn" data-i18n="btnStart">Start</button>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="course-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="course-header" data-unit-id="statistics">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="course-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="course-title-text" data-i18n="unit4Title">Unit 4: Statistics & Data</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="course-meta" data-i18n="unitTopicsCount4">3 Topics</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-chevron-down expand-icon ml-4"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="course-content">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="unit-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <ul class="topic-list">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li class="topic-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="topic-item-name" data-i18n="topic4_1">Mean, Median, Mode, Range</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="topic-action-btn" data-i18n="btnStart">Start</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li class="topic-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="topic-item-name" data-i18n="topic4_2">Scatterplots & Graph Interpretation</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="topic-action-btn" data-i18n="btnStart">Start</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li class="topic-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="topic-item-name" data-i18n="topic4_3">Probability</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="topic-action-btn" data-i18n="btnStart">Start</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="course-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="course-header" data-unit-id="advanced-math">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="course-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="course-title-text" data-i18n="unit5Title">Unit 5: Advanced Math (Preview/Optional)</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="course-meta" data-i18n="unitTopicsCount5">3 Topics</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-chevron-down expand-icon ml-4"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="course-content">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="unit-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <ul class="topic-list">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li class="topic-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="topic-item-name" data-i18n="topic5_1">Quadratics (Intro only)</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="topic-action-btn" data-i18n="btnStart">Start</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li class="topic-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="topic-item-name" data-i18n="topic5_2">Functions (Conceptual, Notation)</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="topic-action-btn" data-i18n="btnStart">Start</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li class="topic-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="topic-item-name" data-i18n="topic5_3">Exponents & Roots</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="topic-item-status text-red-600"><i class="fas fa-times-circle mr-1"></i> <span data-i18n="statusNotStarted">Not Started</span></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="topic-action-btn" data-i18n="btnStart">Start</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </section>

Â  Â  Â  Â  <section id="join-class" class="pb-12"> <h2 class="text-2xl lg:text-3xl font-extrabold text-[var(--thelo-text)] mb-6" data-i18n="joinClassSectionTitle">Join Your Teacher's Class</h2>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div id="class-info-card" class="thelo-card max-w-xl mx-auto flex flex-col items-center">
Â  Â  Â  Â  Â  Â  Â  Â  <div id="not-in-class-state">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-lg text-slate-600 mb-4" data-i18n="joinClassPrompt">Learning with a teacher?</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-slate-600 mb-6" data-i18n="joinClassDesc">Join your class with a special code from your instructor.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex flex-col sm:flex-row gap-3 w-full max-w-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="class-code-input" placeholder="Enter Code" class="flex-grow p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--thelo-blue)]/50" data-i18n="classCodePlaceholder">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="join-class-btn" class="thelo-btn flex-shrink-0 px-4 py-2 text-sm" data-i18n="joinBtn">Join Class</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div id="in-class-state" class="hidden">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="text-xl font-semibold mb-3" data-i18n="yourClassTitle">Your Class: <span id="class-name" class="text-[var(--thelo-blue)]">Mr. Kâ€™s 10th Grade</span></h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-slate-600 mb-4" data-i18n="yourClassCode">Code: <span id="class-code" class="font-mono text-slate-700">thelo-xyz10</span></p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="leave-class-btn" class="thelo-btn-secondary mt-2" data-i18n="leaveClassBtn">Leave Class</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </section>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="text-center text-sm text-slate-500 mt-12 mb-4">
Â  Â  Â  Â  Â  Â  <p>Your User ID: <span id="user-id-display" class="font-mono text-slate-700">Loading...</span></p>
Â  Â  Â  Â  </div>
Â  Â  </main>

Â  Â  <script type="module">
Â  Â  Â  Â  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
Â  Â  Â  Â  import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
Â  Â  Â  Â  import { getFirestore, doc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
Â  Â  Â  Â  import { getStorage, ref, getDownloadURL } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-storage.js";

Â  Â  Â  Â  // Firebase configuration from environment variables
Â  Â  Â  Â  // Make sure these are properly defined in your environment (e.g., Firebase Hosting setup)
Â  Â  Â  Â  const firebaseConfig = {
Â  Â  Â  Â  Â  Â  apiKey: "AIzaSyAbnPpcIt88B0jIAoLUdC71zmQDvR_fdu8",
Â  Â  Â  Â  Â  Â  authDomain: "physmathacademy-722b3.firebaseapp.com",
Â  Â  Â  Â  Â  Â  projectId: "physmathacademy-722b3",
Â  Â  Â  Â  Â  Â  storageBucket: "physmathacademy-722b3.appspot.com",
Â  Â  Â  Â  Â  Â  appId: "1:1093640992262:web:35b1bf4d2364bcf745f587"
Â  Â  Â  Â  };

Â  Â  Â  Â  // Initialize Firebase
Â  Â  Â  Â  const app = initializeApp(firebaseConfig);
Â  Â  Â  Â  const auth = getAuth(app);
Â  Â  Â  Â  const db = getFirestore(app);
Â  Â  Â  Â  const storage = getStorage(app);

Â  Â  Â  Â  // DOM Elements
Â  Â  Â  Â  const studentNameSpan = document.getElementById('student-name');
Â  Â  Â  Â  const profilePhotoNav = document.getElementById('profile-photo-nav');Â 
Â  Â  Â  Â  const openThelobookBtn = document.getElementById('open-thelobook-btn');
Â  Â  Â  Â  const userIdDisplay = document.getElementById('user-id-display');

Â  Â  Â  Â  // Section 1: Welcome & Quick Stats
Â  Â  Â  Â  const studentPointsSpan = document.getElementById('student-points');
Â  Â  Â  Â  const lessonsCompletedCountSpan = document.getElementById('lessons-completed-count');
Â  Â  Â  Â  const streakCountSpan = document.getElementById('streak-count');

Â  Â  Â  Â  // Section 2: Continue Practice
Â  Â  Â  Â  const inProgressLessonCard = document.getElementById('in-progress-lesson-card');
Â  Â  Â  Â  const noInProgressMessage = document.getElementById('no-in-progress-message');
Â  Â  Â  Â  const lastTopicNameSpan = document.getElementById('last-topic-name');
Â  Â  Â  Â  const problemsCountSpan = document.getElementById('problems-count');
Â  Â  Â  Â  const progressPercentageSpan = document.getElementById('progress-percentage');
Â  Â  Â  Â  const lastTopicProgressBar = document.getElementById('last-topic-progress-bar');
Â  Â  Â  Â  const resumePracticeBtn = document.getElementById('resume-practice-btn');

Â  Â  Â  Â  // Section 3: Join a Class
Â  Â  Â  Â  const classCodeInput = document.getElementById('class-code-input');
Â  Â  Â  Â  const joinClassBtn = document.getElementById('join-class-btn');
Â  Â  Â  Â  const inClassStateDiv = document.getElementById('in-class-state');
Â  Â  Â  Â  const notInClassStateDiv = document.getElementById('not-in-class-state');
Â  Â  Â  Â  const classNameSpan = document.getElementById('class-name');
Â  Â  Â  Â  const classCodeSpan = document.getElementById('class-code');
Â  Â  Â  Â  const leaveClassBtn = document.getElementById('leave-class-btn');


Â  Â  Â  Â  let isAuthReady = false;Â 
Â  Â  Â  Â  let currentLang = 'en'; // Global language state

Â  Â  Â  Â  // --- Internationalization Strings ---
Â  Â  Â  Â  const strings = {
Â  Â  Â  Â  Â  Â  en: {
Â  Â  Â  Â  Â  Â  Â  Â  dashboardTitle: 'Thelo Student Dashboard',
Â  Â  Â  Â  Â  Â  Â  Â  welcomeGreetingPrefix: 'Good afternoon, ',Â 
Â  Â  Â  Â  Â  Â  Â  Â  pointsTitle: 'Points',Â 
Â  Â  Â  Â  Â  Â  Â  Â  lessonsCompletedTitle: 'Lessons Completed',
Â  Â  Â  Â  Â  Â  Â  Â  streakTitle: 'Current Streak',
Â  Â  Â  Â  Â  Â  Â  Â  pointsDisplay: 'Points',Â 
Â  Â  Â  Â  Â  Â  Â  Â  lessonsCompletedDisplay: 'Lessons',Â 
Â  Â  Â  Â  Â  Â  Â  Â  streakDisplay: 'Streak: {streakValue} ğŸ”¥', // Placeholder for JS to inject number
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Section 2: Continue Practice
Â  Â  Â  Â  Â  Â  Â  Â  continuePracticeTitle: 'Continue Practice',
Â  Â  Â  Â  Â  Â  Â  Â  lastTopicContext: 'Last Topic: <span class="font-semibold text-[var(--thelo-blue)]" id="last-topic-name">Area of Circles</span>',
Â  Â  Â  Â  Â  Â  Â  Â  topicStats: '<span id="problems-count">0</span> Problems â€¢ <span id="progress-percentage">0%</span> Complete',
Â  Â  Â  Â  Â  Â  Â  Â  resumePracticeBtn: 'Resume Practice',
Â  Â  Â  Â  Â  Â  Â  Â  noInProgressMessage: 'No in-progress lessons. Start a new topic below!',

Â  Â  Â  Â  Â  Â  Â  Â  // Section 3: SAT Math Units (Bulk Practice)
Â  Â  Â  Â  Â  Â  Â  Â  satMathUnitsTitle: 'SAT Math Units (Bulk Practice)',
Â  Â  Â  Â  Â  Â  Â  Â  unit1Title: 'Unit 1: Arithmetic & Number Properties',
Â  Â  Â  Â  Â  Â  Â  Â  unitTopicsCount: '5 Topics',
Â  Â  Â  Â  Â  Â  Â  Â  topic1_1: 'Place Value & Number Types',
Â  Â  Â  Â  Â  Â  Â  Â  topic1_2: 'Factors, Multiples & Divisibility',
Â  Â  Â  Â  Â  Â  Â  Â  topic1_3: 'Fractions, Decimals & Percents',
Â  Â  Â  Â  Â  Â  Â  Â  topic1_4: 'Ratio & Proportion',
Â  Â  Â  Â  Â  Â  Â  Â  topic1_5: 'Arithmetic Word Problems',
Â  Â  Â  Â  Â  Â  Â  Â  unit2Title: 'Unit 2: Algebra & Linear Equations',
Â  Â  Â  Â  Â  Â  Â  Â  unitTopicsCount2: '5 Topics',
Â  Â  Â  Â  Â  Â  Â  Â  topic2_1: 'Solving Linear Equations',
Â  Â  Â  Â  Â  Â  Â  Â  topic2_2: 'Inequalities',
Â  Â  Â  Â  Â  Â  Â  Â  topic2_3: 'Linear Word Problems',
Â  Â  Â  Â  Â  Â  Â  Â  topic2_4: 'Graphs of Linear Equations',
Â  Â  Â  Â  Â  Â  Â  Â  topic2_5: 'Systems of Equations',
Â  Â  Â  Â  Â  Â  Â  Â  unit3Title: 'Unit 3: Geometry & Measurement',
Â  Â  Â  Â  Â  Â  Â  Â  unitTopicsCount3: '5 Topics',
Â  Â  Â  Â  Â  Â  Â  Â  topic3_1: 'Area and Perimeter (including Circles)',
Â  Â  Â  Â  Â  Â  Â  Â  topic3_2: 'Volume & Surface Area',
Â  Â  Â  Â  Â  Â  Â  Â  topic3_3: 'Triangle Properties',
Â  Â  Â  Â  Â  Â  Â  Â  topic3_4: 'Coordinate Geometry',
Â  Â  Â  Â  Â  Â  Â  Â  topic3_5: 'Angles & Parallel Lines',
Â  Â  Â  Â  Â  Â  Â  Â  unit4Title: 'Unit 4: Statistics & Data',
Â  Â  Â  Â  Â  Â  Â  Â  unitTopicsCount4: '3 Topics',
Â  Â  Â  Â  Â  Â  Â  Â  topic4_1: 'Mean, Median, Mode, Range',
Â  Â  Â  Â  Â  Â  Â  Â  topic4_2: 'Scatterplots & Graph Interpretation',
Â  Â  Â  Â  Â  Â  Â  Â  topic4_3: 'Probability',
Â  Â  Â  Â  Â  Â  Â  Â  unit5Title: 'Unit 5: Advanced Math (Preview/Optional)',
Â  Â  Â  Â  Â  Â  Â  Â  unitTopicsCount5: '3 Topics',
Â  Â  Â  Â  Â  Â  Â  Â  topic5_1: 'Quadratics (Intro only)',
Â  Â  Â  Â  Â  Â  Â  Â  topic5_2: 'Functions (Conceptual, Notation)',
Â  Â  Â  Â  Â  Â  Â  Â  topic5_3: 'Exponents & Roots',
Â  Â  Â  Â  Â  Â  Â  Â  statusCompleted: 'Completed',
Â  Â  Â  Â  Â  Â  Â  Â  statusInProgress: 'In Progress',
Â  Â  Â  Â  Â  Â  Â  Â  statusNotStarted: 'Not Started',
Â  Â  Â  Â  Â  Â  Â  Â  btnReview: 'Review',
Â  Â  Â  Â  Â  Â  Â  Â  btnResume: 'Resume',
Â  Â  Â  Â  Â  Â  Â  Â  btnStart: 'Start',

Â  Â  Â  Â  Â  Â  Â  Â  // Section 4: Join a Class
Â  Â  Â  Â  Â  Â  Â  Â  joinClassSectionTitle: 'Join Your Teacher\'s Class',
Â  Â  Â  Â  Â  Â  Â  Â  joinClassPrompt: 'Learning with a teacher?',
Â  Â  Â  Â  Â  Â  Â  Â  joinClassDesc: 'Join your class with a special code from your instructor.',
Â  Â  Â  Â  Â  Â  Â  Â  classCodePlaceholder: 'Enter Code',
Â  Â  Â  Â  Â  Â  Â  Â  joinBtn: 'Join Class',
Â  Â  Â  Â  Â  Â  Â  Â  yourClassTitle: 'Your Class: <span id="class-name" class="text-[var(--thelo-blue)]">Mr. Kâ€™s 10th Grade</span>',
Â  Â  Â  Â  Â  Â  Â  Â  yourClassCode: 'Code: <span id="class-code" class="font-mono text-slate-700">thelo-xyz10</span>',
Â  Â  Â  Â  Â  Â  Â  Â  leaveClassBtn: 'Leave Class',

Â  Â  Â  Â  Â  Â  Â  Â  settingsBtn: 'Settings', // Title for profile photo acting as settings
Â  Â  Â  Â  Â  Â  Â  Â  openThelobookBtn: 'thelobook', // This is no longer used for the button's data-i18n directly
Â  Â  Â  Â  Â  Â  Â  Â  thelobookBtnText: 'thelobook' // This is the span's text
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  hy: {
Â  Â  Â  Â  Â  Â  Â  Â  dashboardTitle: 'Ô¹Õ¥Õ¬Õ¸ ÕˆÖ‚Õ½Õ¡Õ¶Õ¸Õ²Õ« ÕÕ¡Õ°Õ¡Õ¶Õ¡Õ¯',
Â  Â  Â  Â  Â  Â  Â  Â  welcomeGreetingPrefix: 'Ô²Õ¡Ö€Õ« Õ¯Õ¥Õ½Ö…Ö€, ',Â 
Â  Â  Â  Â  Â  Â  Â  Â  pointsTitle: 'Õ„Õ«Õ¡Õ¾Õ¸Ö€Õ¶Õ¥Ö€',
Â  Â  Â  Â  Â  Â  Â  Â  lessonsCompletedTitle: 'Ô±Õ¾Õ¡Ö€Õ¿Õ¾Õ¡Õ® Õ¤Õ¡Õ½Õ¥Ö€',
Â  Â  Â  Â  Â  Â  Â  Â  streakTitle: 'Ô¸Õ¶Õ©Õ¡ÖÕ«Õ¯ Õ·Õ¡Ö€Õ¸Ö‚Õ¶Õ¡Õ¯Õ¡Õ¯Õ¡Õ¶Õ¸Ö‚Õ©ÕµÕ¸Ö‚Õ¶',
Â  Â  Â  Â  Â  Â  Â  Â  pointsDisplay: 'Õ„Õ«Õ¡Õ¾Õ¸Ö€Õ¶Õ¥Ö€',
Â  Â  Â  Â  Â  Â  Â  Â  lessonsCompletedDisplay: 'Ô´Õ¡Õ½Õ¥Ö€',
Â  Â  Â  Â  Â  Â  Â  Â  streakDisplay: 'Õ‡Õ¡Ö€Õ¸Ö‚Õ¶Õ¡Õ¯Õ¡Õ¯Õ¡Õ¶Õ¸Ö‚Õ©ÕµÕ¸Ö‚Õ¶: {streakValue} ğŸ”¥', // Placeholder for JS to inject number

Â  Â  Â  Â  Â  Â  Â  Â  continuePracticeTitle: 'Õ‡Õ¡Ö€Õ¸Ö‚Õ¶Õ¡Õ¯Õ¥Õ¬ Ô³Õ¸Ö€Õ®Õ¶Õ¡Õ¯Õ¡Õ¶ Ô±Õ·Õ­Õ¡Õ¿Õ¡Õ¶Ö„Õ¨',
Â  Â  Â  Â  Â  Â  Â  Â  lastTopicContext: 'ÕÕ¥Ö€Õ»Õ«Õ¶ Õ©Õ¥Õ´Õ¡Õ¶: <span class="font-semibold text-[var(--thelo-blue)]" id="last-topic-name">Õ‡Ö€Õ»Õ¡Õ¶Õ¶Õ¥Ö€Õ« Õ„Õ¡Õ¯Õ¥Ö€Õ¥Õ½Õ¨</span>',
Â  Â  Â  Â  Â  Â  Â  Â  topicStats: '<span id="problems-count">0</span> Ô½Õ¶Õ¤Õ«Ö€Õ¶Õ¥Ö€ â€¢ <span id="progress-percentage">0%</span> Ô±Õ¾Õ¡Ö€Õ¿Õ¾Õ¡Õ®',
Â  Â  Â  Â  Â  Â  Â  Â  resumePracticeBtn: 'Õ‡Õ¡Ö€Õ¸Ö‚Õ¶Õ¡Õ¯Õ¥Õ¬ Ô³Õ¸Ö€Õ®Õ¶Õ¡Õ¯Õ¡Õ¶ Ô±Õ·Õ­Õ¡Õ¿Õ¡Õ¶Ö„Õ¨',
Â  Â  Â  Â  Â  Â  Â  Â  noInProgressMessage: 'Õ‰Õ¯Õ¡Õ¶ Õ¨Õ¶Õ©Õ¡ÖÖ„Õ« Õ´Õ¥Õ» Õ£Õ¿Õ¶Õ¾Õ¸Õ² Õ¤Õ¡Õ½Õ¥Ö€Ö‰ ÕÕ¯Õ½Õ¥Ö„ Õ¶Õ¸Ö€ Õ©Õ¥Õ´Õ¡ Õ¶Õ¥Ö€Ö„Ö‡Õ«ÖÖ‰',

Â  Â  Â  Â  Â  Â  Â  Â  satMathUnitsTitle: 'SAT Õ„Õ¡Õ©Õ¥Õ´Õ¡Õ¿Õ«Õ¯Õ¡ÕµÕ« Õ„Õ¸Õ¤Õ¸Ö‚Õ¬Õ¶Õ¥Ö€ (Ô¶Õ¡Õ¶Õ£Õ¾Õ¡Õ®Õ¡ÕµÕ«Õ¶ Ô³Õ¸Ö€Õ®Õ¶Õ¡Õ¯Õ¡Õ¶ Ô±Õ·Õ­Õ¡Õ¿Õ¡Õ¶Ö„)',
Â  Â  Â  Â  Â  Â  Â  Â  unit1Title: 'Õ„Õ¸Õ¤Õ¸Ö‚Õ¬ 1: Ô¹Õ¾Õ¡Õ¢Õ¡Õ¶Õ¸Ö‚Õ©ÕµÕ¸Ö‚Õ¶ Ö‡ Õ©Õ¾Õ¡ÕµÕ«Õ¶ Õ°Õ¡Õ¿Õ¯Õ¸Ö‚Õ©ÕµÕ¸Ö‚Õ¶Õ¶Õ¥Ö€',
Â  Â  Â  Â  Â  Â  Â  Â  unitTopicsCount: '5 Ô¹Õ¥Õ´Õ¡',
Â  Â  Â  Â  Â  Â  Â  Â  topic1_1: 'Ô¿Õ¡Ö€Õ£Õ¡ÕµÕ«Õ¶ Õ¡Ö€ÕªÕ¥Ö„ Ö‡ Õ©Õ¾Õ¥Ö€Õ« Õ¿Õ¥Õ½Õ¡Õ¯Õ¶Õ¥Ö€',
Â  Â  Â  Â  Â  Â  Â  Â  topic1_2: 'Ô³Õ¸Ö€Õ®Õ¡Õ¯Õ«ÖÕ¶Õ¥Ö€, Õ¢Õ¡Õ¦Õ´Õ¡ÕºÕ¡Õ¿Õ«Õ¯Õ¶Õ¥Ö€ Ö‡ Õ¢Õ¡ÕªÕ¡Õ¶Õ¡Ö€Õ¡Ö€Õ¸Ö‚Õ©ÕµÕ¸Ö‚Õ¶',
Â  Â  Â  Â  Â  Â  Â  Â  topic1_3: 'Ô¿Õ¸Õ¿Õ¸Ö€Õ¡Õ¯Õ¶Õ¥Ö€, Õ¿Õ¡Õ½Õ¶Õ¸Ö€Õ¤Õ¡Õ¯Õ¡Õ¶Õ¶Õ¥Ö€ Ö‡ Õ¿Õ¸Õ¯Õ¸Õ½Õ¶Õ¥Ö€',
Â  Â  Â  Â  Â  Â  Â  Â  topic1_4: 'Õ€Õ¡Ö€Õ¡Õ¢Õ¥Ö€Õ¸Ö‚Õ©ÕµÕ¸Ö‚Õ¶ Ö‡ Õ°Õ¡Õ´Õ¡Õ´Õ¡Õ½Õ¶Õ¸Ö‚Õ©ÕµÕ¸Ö‚Õ¶',
Â  Â  Â  Â  Â  Â  Â  Â  topic1_5: 'Ô¹Õ¾Õ¡Õ¢Õ¡Õ¶Õ¡Õ¯Õ¡Õ¶ Õ¢Õ¡Õ¼Õ¡ÕµÕ«Õ¶ Õ­Õ¶Õ¤Õ«Ö€Õ¶Õ¥Ö€',
Â  Â  Â  Â  Â  Â  Â  Â  unit2Title: 'Õ„Õ¸Õ¤Õ¸Ö‚Õ¬ 2: Õ€Õ¡Õ¶Ö€Õ¡Õ°Õ¡Õ·Õ«Õ¾ Ö‡ Ô³Õ®Õ¡ÕµÕ«Õ¶ Õ€Õ¡Õ¾Õ¡Õ½Õ¡Ö€Õ¸Ö‚Õ´Õ¶Õ¥Ö€',
Â  Â  Â  Â  Â  Â  Â  Â  unitTopicsCount2: '5 Ô¹Õ¥Õ´Õ¡',
Â  Â  Â  Â  Â  Â  Â  Â  topic2_1: 'Ô³Õ®Õ¡ÕµÕ«Õ¶ Õ°Õ¡Õ¾Õ¡Õ½Õ¡Ö€Õ¸Ö‚Õ´Õ¶Õ¥Ö€Õ« Õ¬Õ¸Ö‚Õ®Õ¸Ö‚Õ´',
Â  Â  Â  Â  Â  Â  Â  Â  topic2_2: 'Ô±Õ¶Õ°Õ¡Õ¾Õ¡Õ½Õ¡Ö€Õ¸Ö‚Õ©ÕµÕ¸Ö‚Õ¶Õ¶Õ¥Ö€',
Â  Â  Â  Â  Â  Â  Â  Â  topic2_3: 'Ô³Õ®Õ¡ÕµÕ«Õ¶ Õ¢Õ¡Õ¼Õ¡ÕµÕ«Õ¶ Õ­Õ¶Õ¤Õ«Ö€Õ¶Õ¥Ö€',
Â  Â  Â  Â  Â  Â  Â  Â  topic2_4: 'Ô³Õ®Õ¡ÕµÕ«Õ¶ Õ°Õ¡Õ¾Õ¡Õ½Õ¡Ö€Õ¸Ö‚Õ´Õ¶Õ¥Ö€Õ« Õ£Ö€Õ¡Ö†Õ«Õ¯Õ¶Õ¥Ö€',
Â  Â  Â  Â  Â  Â  Â  Â  topic2_5: 'Õ€Õ¡Õ¾Õ¡Õ½Õ¡Ö€Õ¸Ö‚Õ´Õ¶Õ¥Ö€Õ« Õ°Õ¡Õ´Õ¡Õ¯Õ¡Ö€Õ£Õ¥Ö€',
Â  Â  Â  Â  Â  Â  Â  Â  unit3Title: 'Õ„Õ¸Õ¤Õ¸Ö‚Õ¬ 3: ÔµÖ€Õ¯Ö€Õ¡Õ¹Õ¡ÖƒÕ¸Ö‚Õ©ÕµÕ¸Ö‚Õ¶ Ö‡ Õ¹Õ¡ÖƒÕ¸Ö‚Õ´',
Â  Â  Â  Â  Â  Â  Â  Â  unitTopicsCount3: '5 Ô¹Õ¥Õ´Õ¡',
Â  Â  Â  Â  Â  Â  Â  Â  topic3_1: 'Õ„Õ¡Õ¯Õ¥Ö€Õ¥Õ½ Ö‡ ÕºÕ¡Ö€Õ¡Õ£Õ«Õ® (Õ¶Õ¥Ö€Õ¡Õ¼ÕµÕ¡Õ¬ Õ·Ö€Õ»Õ¡Õ¶Õ¶Õ¥Ö€)',
Â  Â  Â  Â  Â  Â  Â  Â  topic3_2: 'Ô¾Õ¡Õ¾Õ¡Õ¬ Ö‡ Õ´Õ¡Õ¯Õ¥Ö€Õ¥Õ½',
Â  Â  Â  Â  Â  Â  Â  Â  topic3_3: 'ÔµÕ¼Õ¡Õ¶Õ¯ÕµÕ¸Ö‚Õ¶Õ¶Õ¥Ö€Õ« Õ°Õ¡Õ¿Õ¯Õ¸Ö‚Õ©ÕµÕ¸Ö‚Õ¶Õ¶Õ¥Ö€',
Â  Â  Â  Â  Â  Â  Â  Â  topic3_4: 'Ô¿Õ¸Õ¸Ö€Õ¤Õ«Õ¶Õ¡Õ¿Õ¡ÕµÕ«Õ¶ Õ¥Ö€Õ¯Ö€Õ¡Õ¹Õ¡ÖƒÕ¸Ö‚Õ©ÕµÕ¸Ö‚Õ¶',
Â  Â  Â  Â  Â  Â  Â  Â  topic3_5: 'Ô±Õ¶Õ¯ÕµÕ¸Ö‚Õ¶Õ¶Õ¥Ö€ Ö‡ Õ¦Õ¸Ö‚Õ£Õ¡Õ°Õ¥Õ¼ Õ¸Ö‚Õ²Õ«Õ²Õ¶Õ¥Ö€',
Â  Â  Â  Â  Â  Â  Â  Â  unit4Title: 'Õ„Õ¸Õ¤Õ¸Ö‚Õ¬ 4: ÕÕ«Õ³Õ¡Õ¯Õ¡Õ£Ö€Õ¸Ö‚Õ©ÕµÕ¸Ö‚Õ¶ Ö‡ Õ¿Õ¾ÕµÕ¡Õ¬Õ¶Õ¥Ö€',
Â  Â  Â  Â  Â  Â  Â  Â  unitTopicsCount4: '3 Ô¹Õ¥Õ´Õ¡',
Â  Â  Â  Â  Â  Â  Â  Â  topic4_1: 'Õ„Õ«Õ»Õ«Õ¶, Õ´Õ«Õ»Õ¶Õ¡Ö€ÕªÕ¥Ö„, Õ´Õ¸Õ¤Õ¡, Õ´Õ«Õ»Õ¡Õ¯Õ¡ÕµÖ„',
Â  Â  Â  Â  Â  Â  Â  Â  topic4_2: 'Õ‘Ö€Õ´Õ¡Õ¶ Õ£Ö€Õ¡Ö†Õ«Õ¯Õ¶Õ¥Ö€ Ö‡ Õ£Ö€Õ¡Ö†Õ«Õ¯Õ¶Õ¥Ö€Õ« Õ´Õ¥Õ¯Õ¶Õ¡Õ¢Õ¡Õ¶Õ¸Ö‚Õ´',
Â  Â  Â  Â  Â  Â  Â  Â  topic4_3: 'Õ€Õ¡Õ¾Õ¡Õ¶Õ¡Õ¯Õ¡Õ¶Õ¸Ö‚Õ©ÕµÕ¸Ö‚Õ¶',
Â  Â  Â  Â  Â  Â  Â  Â  unit5Title: 'Õ„Õ¸Õ¤Õ¸Ö‚Õ¬ 5: Ô¸Õ¶Õ¤Õ¬Õ¡ÕµÕ¶Õ¾Õ¡Õ® Õ„Õ¡Õ©Õ¥Õ´Õ¡Õ¿Õ«Õ¯Õ¡ (Õ„Õ«Õ¡ÕµÕ¶ Õ†Õ¡Õ­Õ¡Õ¤Õ«Õ¿Õ¸Ö‚Õ´)',
Â  Â  Â  Â  Â  Â  Â  Â  unitTopicsCount5: '3 Ô¹Õ¥Õ´Õ¡',
Â  Â  Â  Â  Â  Â  Â  Â  topic5_1: 'Õ”Õ¡Õ¼Õ¡Õ¯Õ¸Ö‚Õ½Õ« (Õ„Õ«Õ¡ÕµÕ¶ Õ¶Õ¥Ö€Õ¡Õ®Õ¸Ö‚Õ©ÕµÕ¸Ö‚Õ¶)',
Â  Â  Â  Â  Â  Â  Â  Â  topic5_2: 'Õ–Õ¸Ö‚Õ¶Õ¯ÖÕ«Õ¡Õ¶Õ¥Ö€ (Õ€Õ¡ÕµÕ¥ÖÕ¡Õ¯Õ¡Ö€Õ£Õ¡ÕµÕ«Õ¶, Õ¶Õ·Õ¸Ö‚Õ´)',
Â  Â  Â  Â  Â  Â  Â  Â  topic5_3: 'Ô±Õ½Õ¿Õ«Õ³Õ¡Õ¶Õ¶Õ¥Ö€ Ö‡ Õ¡Ö€Õ´Õ¡Õ¿Õ¶Õ¥Ö€',
Â  Â  Â  Â  Â  Â  Â  Â  statusCompleted: 'Ô±Õ¾Õ¡Ö€Õ¿Õ¾Õ¡Õ®',
Â  Â  Â  Â  Â  Â  Â  Â  statusInProgress: 'Ô¸Õ¶Õ©Õ¡ÖÖ„Õ« Õ´Õ¥Õ»',
Â  Â  Â  Â  Â  Â  Â  Â  statusNotStarted: 'Õ‰Õ½Õ¯Õ½Õ¾Õ¡Õ®',
Â  Â  Â  Â  Â  Â  Â  Â  btnReview: 'ÕÕ¥Ö€Õ¡Õ¶Õ¡ÕµÕ¥Õ¬',
Â  Â  Â  Â  Â  Â  Â  Â  btnResume: 'Õ‡Õ¡Ö€Õ¸Ö‚Õ¶Õ¡Õ¯Õ¥Õ¬',
Â  Â  Â  Â  Â  Â  Â  Â  btnStart: 'ÕÕ¯Õ½Õ¥Õ¬',

Â  Â  Â  Â  Â  Â  Â  Â  // Section 4: Join a Class
Â  Â  Â  Â  Â  Â  Â  Â  joinClassSectionTitle: 'Õ„Õ«Õ¡ÖÕ¥Ö„ ÕÕ¥Ö€ ÕˆÖ‚Õ½Õ¸Ö‚ÖÕ¹Õ« Ô´Õ¡Õ½Õ¡Ö€Õ¡Õ¶Õ«Õ¶',
Â  Â  Â  Â  Â  Â  Â  Â  joinClassPrompt: 'ÕÕ¸Õ¾Õ¸Ö€Õ¸Ö‚ÕÕ´ Õ¥Ö„ Õ¸Ö‚Õ½Õ¸Ö‚ÖÕ¹Õ« Õ°Õ¥Õ¿Ö‰',
Â  Â  Â  Â  Â  Â  Â  Â  joinClassDesc: 'Õ„Õ«Õ¡ÖÕ¥Ö„ Õ±Õ¥Ö€ Õ¤Õ¡Õ½Õ¡Ö€Õ¡Õ¶Õ«Õ¶Õ Õ´Õ¸Ö‚Õ¿Ö„Õ¡Õ£Ö€Õ¥Õ¬Õ¸Õ¾ Õ±Õ¥Ö€ Õ¸Ö‚Õ½Õ¸Ö‚ÖÕ¹Õ« Õ°Õ¡Õ¿Õ¸Ö‚Õ¯ Õ¯Õ¸Õ¤Õ¨Ö‰',
Â  Â  Â  Â  Â  Â  Â  Â  classCodePlaceholder: 'Õ„Õ¸Ö‚Õ¿Ö„Õ¡Õ£Ö€Õ¥Ö„ Ô¿Õ¸Õ¤Õ¨',
Â  Â  Â  Â  Â  Â  Â  Â  joinBtn: 'Õ„Õ«Õ¡Õ¶Õ¡Õ¬ Ô´Õ¡Õ½Õ¡Ö€Õ¡Õ¶Õ«Õ¶',
Â  Â  Â  Â  Â  Â  Â  Â  yourClassTitle: 'ÕÕ¥Ö€ Ô´Õ¡Õ½Õ¡Ö€Õ¡Õ¶Õ¨: <span id="class-name" class="text-[var(--thelo-blue)]">ÕŠÖ€Õ¶. Õ”Õ¥ÕµÕ« 10-Ö€Õ¤ Õ¤Õ¡Õ½Õ¡Ö€Õ¡Õ¶</span>',
Â  Â  Â  Â  Â  Â  Â  Â  yourClassCode: 'Ô¿Õ¸Õ¤Õ¨: <span id="class-code" class="font-mono text-slate-700">thelo-xyz10</span>',
Â  Â  Â  Â  Â  Â  Â  Â  leaveClassBtn: 'Ô´Õ¸Ö‚Ö€Õ½ Õ£Õ¡Õ¬ Õ¤Õ¡Õ½Õ¡Ö€Õ¡Õ¶Õ«Ö',

Â  Â  Â  Â  Â  Â  Â  Â  settingsBtn: 'Ô¿Õ¡Ö€Õ£Õ¡Õ¾Õ¸Ö€Õ¸Ö‚Õ´Õ¶Õ¥Ö€',
Â  Â  Â  Â  Â  Â  Â  Â  openThelobookBtn: 'Ô¹Õ¥Õ¬Õ¸Õ£Õ«Ö€Ö„', // This is no longer used for the button's data-i18n directly
Â  Â  Â  Â  Â  Â  Â  Â  thelobookBtnText: 'Ô¹Õ¥Õ¬Õ¸Õ£Õ«Ö€Ö„' // This is the span's text
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  let currentLang = 'en';Â 

Â  Â  Â  Â  function applyLang(lang) {
Â  Â  Â  Â  Â  Â  document.documentElement.lang = lang;
Â  Â  Â  Â  Â  Â  const t = strings[lang] || strings.en;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Iterate over all elements with data-i18n attribute
Â  Â  Â  Â  Â  Â  document.querySelectorAll('[data-i18n]').forEach(el => {
Â  Â  Â  Â  Â  Â  Â  Â  const k = el.dataset.i18n;
Â  Â  Â  Â  Â  Â  Â  Â  // Specifically handle elements where content might be dynamically injected later
Â  Â  Â  Â  Â  Â  Â  Â  if (k === 'welcomeGreetingPrefix' || k === 'streakDisplay') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // For these, we only set the textContent (or parts of it)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  el.textContent = t[k]; // Will be handled by JS later to insert dynamic values
Â  Â  Â  Â  Â  Â  Â  Â  } else if (t[k]) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  el.innerHTML = t[k];Â 
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Update placeholder text for class code input
Â  Â  Â  Â  Â  Â  const classCodeInputEl = document.getElementById('class-code-input');
Â  Â  Â  Â  Â  Â  if (classCodeInputEl) {
Â  Â  Â  Â  Â  Â  Â  Â  classCodeInputEl.placeholder = t.classCodePlaceholder;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Update thelobook button text (targets the span inside the button)
Â  Â  Â  Â  Â  Â  const thelobookBtnTextElement = document.querySelector('#open-thelobook-btn span[data-i18n="thelobookBtnText"]');
Â  Â  Â  Â  Â  Â  if (thelobookBtnTextElement) {
Â  Â  Â  Â  Â  Â  Â  Â  thelobookBtnTextElement.textContent = t.thelobookBtnText;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Update settings button title for accessibility
Â  Â  Â  Â  Â  Â  const profilePhoto = document.getElementById('profile-photo-nav');Â 
Â  Â  Â  Â  Â  Â  if (profilePhoto) {
Â  Â  Â  Â  Â  Â  Â  Â  profilePhoto.title = t.settingsBtn;Â 
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Fetch user data and update dashboard
Â  Â  Â  Â  async function updateDashboard(user) {
Â  Â  Â  Â  Â  Â  if (!db) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("Firestore is not initialized.");
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const userIdDisplayElement = document.getElementById('user-id-display');
Â  Â  Â  Â  Â  Â  if (userIdDisplayElement) {
Â  Â  Â  Â  Â  Â  Â  Â  userIdDisplayElement.textContent = user.uid;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Correctly reference the student's document in the 'thelo-students' collection
Â  Â  Â  Â  Â  Â  const studentDocRef = doc(db, 'thelo-students', user.uid);
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const docSnap = await getDoc(studentDocRef);
Â  Â  Â  Â  Â  Â  Â  Â  if (docSnap.exists()) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const studentData = docSnap.data();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("Fetched student data:", studentData); // Log for debugging

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Load language from Firestore if present
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (studentData.language && typeof studentData.language === 'string') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentLang = studentData.language;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  applyLang(currentLang); // Re-apply language to UI based on user's preference
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // If no language in Firestore, currentLang remains 'en' (from initial load)


Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Update Student Name
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const studentFullName = `${studentData.name || ''} ${studentData.surname || ''}`.trim();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (studentNameSpan) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â studentNameSpan.textContent = studentFullName || 'Student';Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Update profile photo in navbar
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (profilePhotoNav && studentData.profilePicture && typeof studentData.profilePicture === 'string' && studentData.profilePicture.startsWith('http')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  profilePhotoNav.src = studentData.profilePicture;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  profilePhotoNav.src = "https://via.placeholder.com/150/2563EB/FFFFFF?text=P";Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Update Points
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const points = typeof studentData.points === 'string' ? parseInt(studentData.points, 10) : studentData.points;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (studentPointsSpan) studentPointsSpan.textContent = points !== undefined && !isNaN(points) ? points : 0;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Update Streak (FIXED: now reads from 'streak' field AND uses innerHTML to keep emoji)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const streak = typeof studentData.streak === 'string' ? parseInt(studentData.streak, 10) : studentData.streak;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (streakCountSpan) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const actualStreak = streak !== undefined && !isNaN(streak) ? streak : 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  streakCountSpan.innerHTML = `${actualStreak} <span class="text-orange-500">ğŸ”¥</span>`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // --- Simulate Dashboard Data (these fields are not in your specified Firestore doc) ---
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const simulatedLessonsCompleted = Math.floor(Math.random() * 30) + 5;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (lessonsCompletedCountSpan) lessonsCompletedCountSpan.textContent = simulatedLessonsCompleted;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Simulate In-Progress Lesson (show/hide section)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const hasInProgressLesson = Math.random() > 0.5;Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (hasInProgressLesson) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (inProgressLessonCard) inProgressLessonCard.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (noInProgressMessage) noInProgressMessage.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (lastTopicNameSpan) lastTopicNameSpan.textContent = "Solving Linear Equations";Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (problemsCountSpan) problemsCountSpan.textContent = "4";Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const progress = Math.floor(Math.random() * 90) + 5;Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (progressPercentageSpan) progressPercentageSpan.textContent = `${progress}%`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (lastTopicProgressBar) lastTopicProgressBar.style.width = `${progress}%`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (inProgressLessonCard) inProgressLessonCard.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (noInProgressMessage) noInProgressMessage.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Simulate Class Join Status
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const isInClass = Math.random() > 0.5;Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isInClass) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (inClassStateDiv) inClassStateDiv.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (notInClassStateDiv) notInClassStateDiv.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (classNameSpan) classNameSpan.textContent = "Mr. Kâ€™s 10th Grade";Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (classCodeSpan) classCodeSpan.textContent = "thelo-xyz10";Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (inClassStateDiv) inClassStateDiv.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (notInClassStateDiv) notInClassStateDiv.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.warn("No student profile found for UID:", user.uid, "in 'thelo-students' collection.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (studentNameSpan) studentNameSpan.textContent = 'New Student';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (studentPointsSpan) studentPointsSpan.textContent = '0';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (lessonsCompletedCountSpan) lessonsCompletedCountSpan.textContent = '0';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (streakCountSpan) streakCountSpan.innerHTML = `0 <span class="text-orange-500">ğŸ”¥</span>`; // Default with emoji
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  profilePhotoNav.src = "https://via.placeholder.com/150/2563EB/FFFFFF?text=P";Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (inProgressLessonCard) inProgressLessonCard.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (noInProgressMessage) noInProgressMessage.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (inClassStateDiv) inClassStateDiv.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (notInClassStateDiv) notInClassStateDiv.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("Error fetching student profile from Firestore:", error);
Â  Â  Â  Â  Â  Â  Â  Â  if (studentNameSpan) studentNameSpan.textContent = 'Error Loading Student';
Â  Â  Â  Â  Â  Â  Â  Â  if (studentPointsSpan) studentPointsSpan.textContent = '0';
Â  Â  Â  Â  Â  Â  Â  Â  if (lessonsCompletedCountSpan) lessonsCompletedCountSpan.textContent = '0';
Â  Â  Â  Â  Â  Â  Â  Â  if (streakCountSpan) streakCountSpan.innerHTML = `0 <span class="text-orange-500">ğŸ”¥</span>`; // Default with emoji
Â  Â  Â  Â  Â  Â  Â  Â  profilePhotoNav.src = "https://via.placeholder.com/150/2563EB/FFFFFF?text=P";Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (inProgressLessonCard) inProgressLessonCard.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  if (noInProgressMessage) noInProgressMessage.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  if (inClassStateDiv) inClassStateDiv.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  if (notInClassStateDiv) notInClassStateDiv.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  applyLang(currentLang);Â 
Â  Â  Â  Â  }

Â  Â  Â  Â  // Firebase Auth State Listener
Â  Â  Â  Â  onAuthStateChanged(auth, async (user) => {
Â  Â  Â  Â  Â  Â  if (user) {
Â  Â  Â  Â  Â  Â  Â  Â  console.log("User is authenticated:", user.uid);
Â  Â  Â  Â  Â  Â  Â  Â  await updateDashboard(user);

Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  console.log("No user authenticated. Redirecting to login.");
Â  Â  Â  Â  Â  Â  Â  Â  if (isAuthReady) {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â window.location.href = 'index.html';Â 
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  isAuthReady = true;Â 
Â  Â  Â  Â  });

Â  Â  Â  Â  // Profile Photo (Settings) button functionality
Â  Â  Â  Â  if (profilePhotoNav) {
Â  Â  Â  Â  Â  Â  profilePhotoNav.addEventListener('click', (event) => { // Added event parameter
Â  Â  Â  Â  Â  Â  Â  Â  window.location.href = 'https://thelo.space/settings'; // Redirect to your settings page
Â  Â  Â  Â  Â  Â  Â  Â  event.target.blur(); // Remove focus
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Initial language application and event listeners on DOMContentLoaded
Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', () => {
Â  Â  Â  Â  Â  Â  const params = new URLSearchParams(window.location.search);
Â  Â  Â  Â  Â  Â  currentLang = params.get('lang') || 'en';
Â  Â  Â  Â  Â  Â  applyLang(currentLang);Â 
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Accordion functionality for Units
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.course-header').forEach(header => {
Â  Â  Â  Â  Â  Â  Â  Â  header.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const content = header.nextElementSibling;Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  content.classList.toggle('active');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  header.classList.toggle('expanded');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (content.classList.contains('active')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  content.style.maxHeight = content.scrollHeight + "px";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  content.style.maxHeight = null;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  // Handle actions for topics (Start, Resume, Review)
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.topic-action-btn').forEach(button => {
Â  Â  Â  Â  Â  Â  Â  Â  button.addEventListener('click', (event) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  event.stopPropagation();Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const topicName = event.target.closest('.topic-item').querySelector('.topic-item-name').textContent;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const action = event.target.textContent.trim();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert(`${action} Topic: ${topicName}`);Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  event.target.blur(); // Remove focus
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  // Resume Practice Button (if it exists)
Â  Â  Â  Â  Â  Â  if (resumePracticeBtn) {
Â  Â  Â  Â  Â  Â  Â  Â  resumePracticeBtn.addEventListener('click', (event) => { // Added event parameter
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const topicName = lastTopicNameSpan ? lastTopicNameSpan.textContent : "your last topic";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert(`Resuming practice for: ${topicName}!`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  event.target.blur(); // Remove focus
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Join Class Button (if it exists)
Â  Â  Â  Â  Â  Â  if (joinClassBtn) {
Â  Â  Â  Â  Â  Â  Â  Â  joinClassBtn.addEventListener('click', (event) => { // Added event parameter
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const classCodeInput = document.getElementById('class-code-input');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert(`Attempting to join class with code: ${classCodeInput.value}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  event.target.blur(); // Remove focus
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Leave Class Button (if it exists)
Â  Â  Â  Â  Â  Â  if (leaveClassBtn) {
Â  Â  Â  Â  Â  Â  Â  Â  leaveClassBtn.addEventListener('click', (event) => { // Added event parameter
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const className = classNameSpan ? classNameSpan.textContent : "your class";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert(`Attempting to leave: ${className}!`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (inClassStateDiv) inClassStateDiv.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (notInClassStateDiv) notInClassStateDiv.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  event.target.blur(); // Remove focus
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Language Toggle Listener
Â  Â  Â  Â  Â  Â  // This one is here because it relies on document.getElementById('langToggle')
Â  Â  Â  Â  Â  Â  // which might not be available immediately after script loads.
Â  Â  Â  Â  Â  Â  document.getElementById('langToggle').addEventListener('click', async (event) => { // Added async and event parameter
Â  Â  Â  Â  Â  Â  Â  Â  currentLang = (currentLang === 'en') ? 'hy' : 'en';
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Update URL parameter (optional, but good for direct sharing)
Â  Â  Â  Â  Â  Â  Â  Â  const url = new URL(window.location);
Â  Â  Â  Â  Â  Â  Â  Â  url.searchParams.set('lang', currentLang);
Â  Â  Â  Â  Â  Â  Â  Â  window.history.replaceState({}, '', url);

Â  Â  Â  Â  Â  Â  Â  Â  applyLang(currentLang); // Update UI immediately

Â  Â  Â  Â  Â  Â  Â  Â  // Save language preference to Firestore (only if user is logged in)
Â  Â  Â  Â  Â  Â  Â  Â  if (auth.currentUser) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const studentDocRef = doc(db, 'thelo-students', auth.currentUser.uid);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await updateDoc(studentDocRef, { // Using updateDoc here instead of setDoc to only modify 'language'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  language: currentLang
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log("User language preference updated in Firestore:", currentLang);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error("Error updating language in Firestore:", error);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.warn("Cannot save language to Firestore: No user authenticated.");
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  event.target.blur(); // Remove focus
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  });
Â  Â  });
Â  Â  </script>

</body>
</html>
