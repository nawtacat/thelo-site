<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-i18n="title">thelo – a handwriting-first learning platform</title>
    <link rel="icon" href="https://thelo.space/img/thelofavicon.png" type="image/png" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;700;800&family=Noto+Serif+Armenian:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        /* ... all your CSS is the same ... */
    </style>
</head>

<body class="antialiased">

<script>
    (function() {
        if (localStorage.getItem('theloUserLoggedIn') === 'true') {
            // If the user is logged in, immediately redirect to the dashboard.
            // The rest of the page will not even be loaded.
            window.location.href = 'https://thelo.space/sdashboard';
        }
    })();
</script>


<nav id="mainNav" class="w-full z-50 border-b border-slate-200 backdrop-blur-sm bg-transparent">
      </nav>

<script>
// The large script at the bottom remains mostly the same.
// It will now only run for users who are NOT logged in.
// It also correctly changes the link to "Dashboard" for logged-in users
// in the rare case they land on the page without being redirected (e.g., if JavaScript was slow).
document.addEventListener('DOMContentLoaded', () => {

    const strings = {
        en: {
            // ...
            navAuth: 'Log in',
            navDashboard: 'Dashboard', // Keep this
            // ...
        },
        hy: {
            // ...
            navAuth: 'Մուտք',
            navDashboard: 'Իմ էջը', // Keep this
            // ...
        }
    };

    // This function is still useful to correctly set the link text
    function updateAuthLinkText() {
        const authFlag = localStorage.getItem('theloUserLoggedIn');
        const authLink = document.querySelector('a[data-i18n="navAuth"], a[data-i18n="navDashboard"]');

        if (authFlag === 'true' && authLink) {
            authLink.href = 'https://thelo.space/sdashboard';
            authLink.dataset.i18n = 'navDashboard';
            const currentLang = document.documentElement.lang || 'en';
            authLink.textContent = strings[currentLang].navDashboard;
        }
    }

    function applyLang(lang) {
        document.documentElement.lang = lang;
        const t = strings[lang] || strings.en;
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const k = el.dataset.i18n;
            if (t[k]) {
                el.innerHTML = t[k];
            }
        });
        document.getElementById('langToggle').textContent = (lang === 'hy') ? 'EN' : 'Հայ';
        
        // ... rest of applyLang function
        
        updateAuthLinkText(); // Call the updated function here
    }

    // Call the auth check immediately on load
    updateAuthLinkText();

    // ... The rest of your script (animation, language switcher, etc.) ...
     const params = new URLSearchParams(window.location.search);
     let currentLang = params.get('lang') || 'en';
     applyLang(currentLang);
     // ...
});
</script>

</body>
</html>
