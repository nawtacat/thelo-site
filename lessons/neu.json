{
  "lessonTitle": "Մատրիցային գործողություններ",
  "lessonLanguage": "hy",
  "stages": [
    {
      "stageId": "s1_intro",
      "type": "explanation",
      "headline": "Բարև։ Այսօր կուսումնասիրենք մատրիցները։ Մատրիցը թվերի ուղղանկյուն աղյուսակ է՝ դասավորված տողերով և սյուներով։",
      "studentInput": false
    },
    {
      "stageId": "s2_example_dimensions",
      "type": "explanation",
      "headline": "Օրինակ՝ սա /K 2 \\times 2 K/ չափի մատրից է (2 տող, 2 սյուն)։ /K A = \\begin{pmatrix} 1 & 2 \\ 3 & 4 \\end{pmatrix} K/",
      "studentInput": false
    },
    {
      "stageId": "s3_addition_handwriting",
      "type": "question_math_solution",
      "headline": "Գումարե՛ք մատրիցները՝ /K \\begin{pmatrix} 1 & 2 \\ 3 & 4 \\end{pmatrix} + \\begin{pmatrix} 5 & 6 \\ 7 & 8 \\end{pmatrix} K/։ Ցո՛ւյց տվեք ձեր քայլերն ու պատասխանը։",
      "studentInput": true,
      "problemText": "Գտե՛ք երկու մատրիցների գումարը։",
      "correctAnswer": "[[6, 8], [10, 12]]",
      "solutionSteps": [
        "Գումարել համապատասխան էլեմենտները՝ 1+5, 2+6, 3+7, 4+8։",
        "Արդյունքը՝ /K \\begin{pmatrix} 6 & 8 \\ 10 & 12 \\end{pmatrix} K/։"
      ],
      "llmHints": {
        "methods": {
          "matrix_addition": {
            "mustSeeAnyTokens": ["1+5", "2+6", "3+7", "4+8", "6", "8", "10", "12"]
          }
        },
        "methodRules": {
          "onlyAttributeIfTokensVisible": false
        },
        "feedbackTemplates": {
          "correct_matrix_addition": "Ճիշտ է։ Դուք ճիշտ գումարեցիք համապատասխան էլեմենտները։",
          "unclear_method": "Պատասխանը ճիշտ է, բայց ես չեմ տեսնում, թե ինչպես գումարեցիք էլեմենտները։"
        },
        "revealOnAttempt": 2,
        "misconceptions": [
          {
            "regex": "1\\*5",
            "feedback": "Ուշադրություն, սա գումարում է, ոչ թե բազմապատկում։"
          }
        ]
      }
    },
    {
      "stageId": "s4_scalar_mcq",
      "type": "explanation_with_mcq",
      "headline": "Ինչի՞ է հավասար /K 3 \\times \\begin{pmatrix} 2 & 0 \\ 1 & 5 \\end{pmatrix} K/ արտահայտությունը։",
      "studentInput": false,
      "optionsQuiz": {
        "choices": [
          "/K \\begin{pmatrix} 6 & 0 \\ 3 & 15 \\end{pmatrix} K/",
          "/K \\begin{pmatrix} 5 & 3 \\ 4 & 8 \\end{pmatrix} K/",
          "/K \\begin{pmatrix} 6 & 3 \\ 3 & 15 \\end{pmatrix} K/",
          "/K \\begin{pmatrix} 2 & 0 \\ 3 & 15 \\end{pmatrix} K/"
        ],
        "correctIndex": 0,
        "feedbackCorrect": "Ճիշտ է։ Բազմապատկեք յուրաքանչյուր էլեմենտը 3-ով։",
        "feedbackIncorrect": "Սխալ է։ Պետք է 3-ը բազմապատկել մատրիցի *բոլոր* էլեմենտներով։"
      }
    },
    {
      "stageId": "s5_matrix_mult_handwriting",
      "type": "question_math_solution",
      "headline": "Բազմապատկե՛ք մատրիցները՝ /K \\begin{pmatrix} 1 & 2 \\ 3 & 4 \\end{pmatrix} \\times \\begin{pmatrix} 5 & 6 \\ 7 & 8 \\end{pmatrix} K/։ Սա դժվար է, ցույց տվեք քայլերը։",
      "studentInput": true,
      "problemText": "Հաշվեք երկու 2x2 մատրիցների արտադրյալը։",
      "correctAnswer": "[[19, 22], [43, 50]]",
      "solutionSteps": [
        "Առաջին տող, առաջին սյուն՝ (1*5 + 2*7) = 19։",
        "Առաջին տող, երկրորդ սյուն՝ (1*6 + 2*8) = 22։",
        "Երկրորդ տող, առաջին սյուն՝ (3*5 + 4*7) = 43։",
        "Երկրորդ տող, երկրորդ սյուն՝ (3*6 + 4*8) = 50։",
        "Արդյունքը՝ /K \\begin{pmatrix} 19 & 22 \\ 43 & 50 \\end{pmatrix} K/։"
      ],
      "llmHints": {
        "methods": {
          "row_by_column": {
            "mustSeeAnyTokens": ["1*5", "2*7", "1*6", "2*8", "3*5", "4*7", "3*6", "4*8", "19", "22", "43", "50"]
          }
        },
        "feedbackTemplates": {
          "correct_row_by_column": "Հիանալի է։ Դուք ճիշտ օգտագործեցիք տող-սյուն բազմապատկման կանոնը։",
          "unclear_method": "Պատասխանը ճիշտ է, սակայն քայլերն ամբողջությամբ պարզ չեն։"
        },
        "revealOnAttempt": 2
      }
    },
    {
      "stageId": "s6_determinant_mcq",
      "type": "explanation_with_mcq",
      "headline": "Գտե՛ք /K A = \\begin{pmatrix} 5 & 2 \\ 4 & 3 \\end{pmatrix} K/ մատրիցի որոշիչը (determinant)։ Հիշեցում՝ /K det(A) = ad - bc K/։",
      "studentInput": true,
      "optionsQuiz": {
        "choices": [
          "/K 7 K/",
          "/K 23 K/",
          "/K -7 K/",
          "/K 8 K/"
        ],
        "correctIndex": 0,
        "feedbackCorrect": "Ճիշտ է։ 5 × 3 - 2 × 4 = 15 - 8 = 7։",
        "feedbackIncorrect": "Ոչ։ Կիրառեք ad - bc բանաձևը։"
      },
      "problemText": "Find the determinant of the 2x2 matrix A.",
      "correctAnswer": "7",
      "solutionSteps": [
        "Identify a=5, b=2, c=4, d=3.",
        "Calculate ad: 5 * 3 = 15.",
        "Calculate bc: 2 * 4 = 8.",
        "Subtract: 15 - 8 = 7."
      ]
    },
    {
      "stageId": "s7_transpose_mcq",
      "type": "explanation_with_mcq",
      "headline": "Ո՞րն է /K B = \\begin{pmatrix} 1 & 2 & 3 \\ 4 & 5 & 6 \\end{pmatrix} K/ մատրիցի տրանսպոնացված տարբերակը (/K B^T K/)։",
      "studentInput": false,
      "optionsQuiz": {
        "choices": [
          "/K \\begin{pmatrix} 1 & 4 \\ 2 & 5 \\ 3 & 6 \\end{pmatrix} K/",
          "/K \\begin{pmatrix} 4 & 5 & 6 \\ 1 & 2 & 3 \\end{pmatrix} K/",
          "/K \\begin{pmatrix} 3 & 6 \\ 2 & 5 \\ 1 & 4 \\end{pmatrix} K/",
          "/K \\begin{pmatrix} 6 & 5 & 4 \\ 3 & 2 & 1 \\end{pmatrix} K/"
        ],
        "correctIndex": 0,
        "feedbackCorrect": "Ճիշտ է։ Տողերը դառնում են սյուներ։",
        "feedbackIncorrect": "Ոչ։ Տրանսպոնացնելիս առաջին տողը դառնում է առաջին սյուն, երկրորդ տողը՝ երկրորդ սյուն, և այլն։"
      }
    },
    {
      "stageId": "s8_wrapup",
      "type": "explanation",
      "headline": "Հիանալի է։ Դուք սովորեցիք մատրիցային հիմնական գործողությունները՝ գումարում, բազմապատկում, որոշիչի հաշվում և տրանսպոնացում։",
      "studentInput": false
    }
  ]
}
