{
  "lessonTitle": "Right Triangles & Percents – Clean JSON Sample",
  "lessonLanguage": "en",
  "stages": [
    {
      "type": "explanation",
      "headline": "Welcome! This lesson practices /K a^2 + b^2 = c^2 K/ and percent-of calculations. Follow the on-screen instructions.",
      "studentInput": false,
      "audioFile": "https://pha.am/audios/v1.ogg"
    },
    {
      "type": "explanation",
      "headline": "Here is a right triangle diagram. Identify the legs /K a, b K/ and hypotenuse /K c K/.",
      "image": "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1e/Trigonometry_triangle.svg/640px-Trigonometry_triangle.svg.png",
      "studentInput": false
    },
    {
      "type": "explanation_with_mcq",
      "headline": "If /K a = 3 K/ and /K b = 4 K/, what is /K c K/?\\n\\nDraw your work, choose an answer, then press Check.",
      "image": "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1e/Trigonometry_triangle.svg/640px-Trigonometry_triangle.svg.png",
      "studentInput": true,
      "optionsQuiz": {
        "choices": ["/K 3 K/", "/K 5 K/", "/K 7 K/"],
        "correctIndex": 1,
        "feedbackCorrect": "Excellent! You got it."
      },
      "problemText": "Solve for the hypotenuse c in a right triangle with legs a=3 and b=4 using the Pythagorean theorem.",
      "correctAnswer": "5",
      "solutionSteps": "1) a^2 + b^2 = c^2. 2) 3^2 + 4^2 = c^2. 3) 9 + 16 = 25. 4) c = sqrt(25) = 5.",
      "llmHints": {
        "language": "en",
        "revealOnAttempt": 3,
        "answer": { "value": 5, "finalFormRegex": "(?:\\bc\\s*=\\s*)?5\\b", "tolerance": 0, "units": null },
        "methods": {
          "pythagorean": {
            "niceName": "Pythagorean theorem",
            "mustSeeAnyTokens": ["a^2+b^2=c^2", "3^2+4^2=c^2", "c^2=25", "sqrt(25)"],
            "optionalTokens": ["9+16=25", "c=5"]
          },
          "unclear": {}
        },
        "methodRules": { "onlyAttributeIfTokensVisible": true, "defaultOnUnclear": "unclear" },
        "misconceptions": [
          { "regex": "\\b3\\s*\\+\\s*4\\s*=\\s*7\\b", "feedback": "You added the legs. Start with a^2 + b^2 = c^2 and square first." }
        ],
        "feedbackTemplates": {
          "correct_generic": "Your answer is correct.",
          "correct_pythagorean": "Nice work—you applied a^2 + b^2 = c^2 and got c = 5.",
          "unclear_method": "Your answer may be correct, but I couldn't read the steps clearly. Please rewrite the key step."
        },
        "disallowedPhrases": []
      }
    },
    {
      "type": "question_math_solution",
      "headline": "What is /K 15\\% K/ of /K 80 K/?\\n\\nShow your work and press Check.",
      "studentInput": true,
      "problemText": "Compute 15% of 80.",
      "correctAnswer": "12",
      "solutionSteps": "Use 15/100 × 80 = 12 (simplify the fraction), or 0.15 × 80 = 12.",
      "llmHints": {
        "language": "en",
        "revealOnAttempt": 3,
        "answer": { "value": 12, "finalFormRegex": "^\\s*12\\s*$", "tolerance": 0, "units": null },
        "methods": {
          "fraction_percent_over_100": {
            "niceName": "fraction method",
            "mustSeeAnyTokens": ["15/100", "×80", "80×15/100", "=12"]
          },
          "percent_as_decimal": {
            "niceName": "decimal method",
            "mustSeeAnyTokens": ["0.15", "0.150", "×80", "=12"]
          },
          "unclear": {}
        },
        "methodRules": { "onlyAttributeIfTokensVisible": true, "defaultOnUnclear": "unclear" },
        "misconceptions": [
          { "regex": "\\b15\\s*\\+\\s*80\\s*=\\s*95\\b", "feedback": "Percent of a number means multiply, not add." }
        ],
        "feedbackTemplates": {
          "correct_generic": "Correct.",
          "correct_fraction_percent_over_100": "Correct—multiplying by 15/100 and simplifying gives 12.",
          "correct_percent_as_decimal": "Correct—0.15 × 80 = 12.",
          "unclear_method": "That looks close—rewrite the step where you turn the percent into a multiplier."
        },
        "disallowedPhrases": []
      }
    },
    {
      "type": "question_handwriting",
      "headline": "Now a quick one: What is /K 8 \\times 7 K/?\\n\\nWrite the answer then press Check.",
      "studentInput": true,
      "problemText": "Compute 8 × 7.",
      "correctAnswerOcr": "56",
      "correctAnswer": "56",
      "solutionSteps": "8 × 7 = 56.",
      "llmHints": {
        "language": "en",
        "revealOnAttempt": 2,
        "answer": { "value": 56, "finalFormRegex": "^\\s*56\\s*$", "tolerance": 0, "units": null },
        "methods": {
          "multiplication": {
            "niceName": "multiplication",
            "mustSeeAnyTokens": ["8×7", "8*7", "7×8", "7*8", "=56"]
          },
          "unclear": {}
        },
        "methodRules": { "onlyAttributeIfTokensVisible": true, "defaultOnUnclear": "unclear" },
        "feedbackTemplates": {
          "correct_generic": "Correct.",
          "correct_multiplication": "Correct—8 × 7 = 56."
        },
        "disallowedPhrases": []
      }
    },
    {
      "type": "explanation",
      "headline": "Great job! You’ve completed the lesson.",
      "studentInput": false
    }
  ]
}
